import{_ as P,d as Y,c as B,r as y,h as j,o as L,j as n,k as h,l as t,az as M,aA as Q,F as s,m as e,p as v,D as x,aC as V,aB as i,t as o,aY as q,aD as m,bx as E,E as f,A as F,I as w,J as r,B as c,q as u,K as J,G as O}from"./index.a0f63ec5.js";import{Q as U,a as $}from"./QTimeline.ce3cc7a7.js";import{d as G}from"./date.33ab5469.js";import{u as K}from"./notary.7dd5c789.js";const W={class:"content-container q-pa-md"},H={class:"row items-center q-mb-md"},X={class:"col-auto"},Z={key:0,class:"q-pa-xl flex flex-center"},ee={key:1},te={class:"row q-col-gutter-md q-mb-md"},ae={class:"col-12 col-sm-6 col-md-3"},se={class:"text-h3 text-weight-bold"},le={class:"col-12 col-sm-6 col-md-3"},oe={class:"text-h3 text-weight-bold"},ie={class:"col-12 col-sm-6 col-md-3"},de={class:"text-h3 text-weight-bold"},ne={class:"col-12 col-sm-6 col-md-3"},re={class:"text-h3 text-weight-bold"},ce={class:"row q-col-gutter-md q-mb-md"},ue={class:"col-12 col-md-8"},me={class:"row q-col-gutter-md"},fe={class:"col-12 col-md-9"},pe={class:"text-h6 text-primary"},_e={class:"text-subtitle2"},ve={class:"text-caption q-mb-md"},ge={class:"col-12 col-md-3"},ye={class:"text-center"},he={class:"col-12 col-md-4"},be={class:"row q-col-gutter-md"},xe={class:"col-12"},qe={key:1,class:"text-center q-pa-md"},we=Y({__name:"DashboardPage",setup(De){const R=B(),D=K(),b=y(!1),g=y(!1),d=y({pending:0,completed_today:0,completed_week:0,completed_month:0,completed_total:0,avg_time:"0m",avg_response:"0m",unique_requesters:0}),k=y([]),A=y([{type:"accepted",title:"Document Request Accepted",description:'You accepted "Power of Attorney" from John Doe',timestamp:new Date(Date.now()-1e3*60*30).toISOString()},{type:"approved",title:"Document Notarized",description:'You notarized "Affidavit of Loss" for Jane Smith',timestamp:new Date(Date.now()-1e3*60*45).toISOString()},{type:"rejected",title:"Document Rejected",description:'You rejected "Contract Agreement" due to missing information',timestamp:new Date(Date.now()-1e3*60*90).toISOString()}]),p=j(()=>k.value.length>0?k.value[0]:null),C=l=>l?G.formatDate(new Date(l),"MMM D, YYYY h:mm A"):"",I=l=>{switch(l){case"accepted":return"fa-solid fa-check";case"approved":return"fa-solid fa-stamp";case"rejected":return"fa-solid fa-times";default:return"fa-solid fa-history"}},T=l=>{switch(l){case"accepted":return"info";case"approved":return"positive";case"rejected":return"negative";default:return"grey"}},S=async()=>{b.value=!0;try{const l=await D.fetchDashboardStats();l&&(d.value=l);const a=await D.fetchQueue();k.value=a||[]}catch(l){console.error("Error loading dashboard data:",l),Q.create({type:"negative",message:"Failed to load dashboard data"})}finally{b.value=!1}},z=async l=>{if(!(!l||g.value)){g.value=!0;try{const a=await D.acceptRequest(l.queue_id);a&&(Q.create({type:"positive",message:"Request accepted successfully"}),R.push(`/notary/requests/${a.requestId}`))}catch(a){console.error("Error accepting request:",a),Q.create({type:"negative",message:"Failed to accept request"})}finally{g.value=!1}}};return L(()=>{S()}),(l,a)=>(n(),h(M,{class:"notary-dashboard-page bg-grey-1"},{default:t(()=>[s("div",W,[s("div",H,[a[1]||(a[1]=s("div",{class:"col"},[s("h1",{class:"text-h5 q-my-none"},"Notary Dashboard"),s("p",{class:"text-grey-8 q-mb-none"}," Monitor your notarization activity and performance ")],-1)),s("div",X,[e(v,{outline:"",color:"primary",label:"Refresh Data",icon:"fa-solid fa-sync","no-caps":"",onClick:S,loading:b.value},null,8,["loading"])])]),b.value?(n(),x("div",Z,[e(V,{color:"primary",size:"3em"}),a[2]||(a[2]=s("span",{class:"q-ml-sm text-primary"},"Loading dashboard data...",-1))])):(n(),x("div",ee,[s("div",te,[s("div",ae,[e(m,{flat:"",class:"bg-primary text-white"},{default:t(()=>[e(i,null,{default:t(()=>[s("div",se,o(d.value.pending||0),1),a[3]||(a[3]=s("div",{class:"text-subtitle1"},"In Queue",-1))]),_:1}),e(q,{align:"right"},{default:t(()=>[e(v,{flat:"",label:"View Queue",to:"/notary/inbox"})]),_:1})]),_:1})]),s("div",le,[e(m,{flat:"",class:"bg-positive text-white"},{default:t(()=>[e(i,null,{default:t(()=>[s("div",oe,o(d.value.completed_today||0),1),a[4]||(a[4]=s("div",{class:"text-subtitle1"},"Completed Today",-1))]),_:1}),e(q,{align:"right"},{default:t(()=>[e(v,{flat:"",label:"View All",to:"/notary/processed"})]),_:1})]),_:1})]),s("div",ie,[e(m,{flat:"",class:"bg-info text-white"},{default:t(()=>[e(i,null,{default:t(()=>[s("div",de,o(d.value.completed_total||0),1),a[5]||(a[5]=s("div",{class:"text-subtitle1"},"Total Completed",-1))]),_:1}),e(q,{align:"right"},{default:t(()=>[e(v,{flat:"",label:"View Stats"})]),_:1})]),_:1})]),s("div",ne,[e(m,{flat:"",class:"bg-accent text-white"},{default:t(()=>[e(i,null,{default:t(()=>[s("div",re,o(d.value.avg_time||"0m"),1),a[6]||(a[6]=s("div",{class:"text-subtitle1"},"Avg. Processing Time",-1))]),_:1}),e(q,{align:"right"},{default:t(()=>[e(v,{flat:"",label:"Details"})]),_:1})]),_:1})])]),s("div",ce,[s("div",ue,[e(m,{flat:"",class:"bg-white"},{default:t(()=>[e(i,{class:"q-pb-none"},{default:t(()=>a[7]||(a[7]=[s("div",{class:"text-h6"},"Next in Queue",-1)])),_:1}),p.value?(n(),h(i,{key:0},{default:t(()=>[s("div",me,[s("div",fe,[s("div",pe,o(p.value.document_title),1),s("div",_e," Reference: "+o(p.value.request_reference),1),s("div",ve," Requested by "+o(p.value.requester_name||"User")+" on "+o(C(p.value.requested_at)),1),e(v,{unelevated:"",color:"primary",label:"Process Now",icon:"fa-solid fa-check","no-caps":"",loading:g.value,disable:g.value,onClick:a[0]||(a[0]=_=>z(p.value))},null,8,["loading","disable"])]),s("div",ge,[s("div",ye,[e(E,{"show-value":"",value:100,size:"80px",thickness:.2,color:"positive","track-color":"grey-3",class:"q-mb-md"},{default:t(()=>[e(f,{name:"fa-solid fa-file-signature",size:"2rem",color:"positive"})]),_:1}),a[8]||(a[8]=s("div",{class:"text-body2 text-center"},"Ready for Processing",-1))])])])]),_:1})):(n(),h(i,{key:1,class:"text-center q-pa-xl"},{default:t(()=>[e(f,{name:"fa-solid fa-check-circle",size:"3em",color:"positive"}),a[9]||(a[9]=s("div",{class:"text-h6 q-mt-md"},"Queue is Clear",-1)),a[10]||(a[10]=s("p",{class:"text-grey-8"}," There are no document requests awaiting notarization at this time. ",-1))]),_:1}))]),_:1})]),s("div",he,[e(m,{flat:"",class:"bg-white"},{default:t(()=>[e(i,{class:"q-pb-none"},{default:t(()=>a[11]||(a[11]=[s("div",{class:"text-h6"},"Quick Stats",-1)])),_:1}),e(i,null,{default:t(()=>[e(F,null,{default:t(()=>[e(w,null,{default:t(()=>[e(r,{avatar:""},{default:t(()=>[e(f,{name:"fa-solid fa-calendar-check",color:"positive"})]),_:1}),e(r,null,{default:t(()=>[e(c,null,{default:t(()=>a[12]||(a[12]=[u("Completed This Week")])),_:1}),e(c,{caption:""},{default:t(()=>[u(o(d.value.completed_week||0)+" documents",1)]),_:1})]),_:1})]),_:1}),e(w,null,{default:t(()=>[e(r,{avatar:""},{default:t(()=>[e(f,{name:"fa-solid fa-calendar",color:"primary"})]),_:1}),e(r,null,{default:t(()=>[e(c,null,{default:t(()=>a[13]||(a[13]=[u("Completed This Month")])),_:1}),e(c,{caption:""},{default:t(()=>[u(o(d.value.completed_month||0)+" documents",1)]),_:1})]),_:1})]),_:1}),e(w,null,{default:t(()=>[e(r,{avatar:""},{default:t(()=>[e(f,{name:"fa-solid fa-user-check",color:"info"})]),_:1}),e(r,null,{default:t(()=>[e(c,null,{default:t(()=>a[14]||(a[14]=[u("Unique Requesters")])),_:1}),e(c,{caption:""},{default:t(()=>[u(o(d.value.unique_requesters||0)+" users",1)]),_:1})]),_:1})]),_:1}),e(w,null,{default:t(()=>[e(r,{avatar:""},{default:t(()=>[e(f,{name:"fa-solid fa-clock",color:"warning"})]),_:1}),e(r,null,{default:t(()=>[e(c,null,{default:t(()=>a[15]||(a[15]=[u("Average Response Time")])),_:1}),e(c,{caption:""},{default:t(()=>[u(o(d.value.avg_response||"0m"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])]),s("div",be,[s("div",xe,[e(m,{flat:"",class:"bg-white"},{default:t(()=>[e(i,{class:"q-pb-none"},{default:t(()=>a[16]||(a[16]=[s("div",{class:"text-h6"},"Recent Activity",-1)])),_:1}),e(i,null,{default:t(()=>[A.value.length>0?(n(),h(U,{key:0,color:"primary",layout:"comfortable",class:"q-px-md"},{default:t(()=>[(n(!0),x(J,null,O(A.value,(_,N)=>(n(),h($,{key:N,title:_.title,subtitle:C(_.timestamp),icon:I(_.type),color:T(_.type)},{default:t(()=>[s("div",null,o(_.description),1)]),_:2},1032,["title","subtitle","icon","color"]))),128))]),_:1})):(n(),x("div",qe,[e(f,{name:"fa-solid fa-history",size:"2em",color:"grey-6"}),a[17]||(a[17]=s("div",{class:"q-mt-sm text-grey-8"},"No recent activity",-1))]))]),_:1})]),_:1})])])]))])]),_:1}))}});var Se=P(we,[["__scopeId","data-v-c568d66a"]]);export{Se as default};
