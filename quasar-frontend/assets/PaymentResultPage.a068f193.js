import{_ as S,d as B,e as I,c as Q,r as l,h as s,o as z,j as o,k as N,w as v,az as A,aA as b,D as r,l as a,aB as T,B as y,aC as Y,C as q,t as f,n as _,aD as F}from"./index.fce983f6.js";import{P}from"./payment.d70d1413.js";const M={class:"content-container q-pa-md"},V={key:0,class:"column items-center q-pa-md"},E={key:1,class:"column items-center q-pa-md"},L={class:"text-subtitle1 q-mt-md"},$={key:2,class:"column items-center q-pa-md"},j={class:"text-h6 q-mt-md"},W={class:"text-body1 q-mt-sm"},G={class:"row q-mt-lg"},H=B({__name:"PaymentResultPage",setup(J){const i=I();Q();const u=l(!0),c=l(""),h=l(""),d=l(null),m=l(null),e=s(()=>i.path.includes("success")?"success":i.path.includes("failure")?"failure":"cancel"),x=s(()=>{switch(e.value){case"success":return"fa-solid fa-check-circle";case"failure":return"fa-solid fa-times-circle";case"cancel":return"fa-solid fa-ban";default:return"fa-solid fa-question-circle"}}),p=s(()=>{switch(e.value){case"success":return"positive";case"failure":return"negative";case"cancel":return"grey-7";default:return"primary"}}),w=s(()=>{switch(e.value){case"success":return"Payment Successful";case"failure":return"Payment Failed";case"cancel":return"Payment Cancelled";default:return"Payment Result"}}),R=s(()=>{switch(e.value){case"success":return"Your payment has been successfully processed. Your document has been placed in the notarization queue.";case"failure":return"We were unable to process your payment. Please try again or contact support if the problem persists.";case"cancel":return"Your payment has been cancelled. You can try again whenever you're ready.";default:return"Thank you for using our service."}}),k=s(()=>{switch(e.value){case"success":return"View Document Status";case"failure":case"cancel":return"Try Again";default:return"Continue"}}),C=s(()=>{switch(e.value){case"success":return`/user/documents/${m.value||""}`;case"failure":case"cancel":return d.value?`/user/payment?request_id=${m.value}`:"/user/inbox";default:return"/user/dashboard"}}),D=async()=>{u.value=!0;try{const n=i.query.transaction_id;if(!n){c.value="Missing transaction information",u.value=!1;return}if(d.value=Number(n),e.value==="success"){const t=await P.checkPaymentStatus(d.value);if(t.data.success){h.value=t.data.data.status;const g=await P.getRequestPaymentDetails(Number(t.data.data.request_id));g.data.success&&(m.value=g.data.data.request_id),b.create({type:"positive",message:"Payment completed successfully"})}else c.value="Failed to verify payment status"}else h.value=e.value,b.create({type:e.value==="failure"?"negative":"warning",message:e.value==="failure"?"Payment failed":"Payment cancelled"})}catch(n){console.error("Error processing payment result:",n),c.value="Failed to process payment result"}finally{u.value=!1}};return z(()=>{D()}),(n,t)=>(o(),N(A,{padding:"",class:"payment-result-page"},{default:v(()=>[r("div",M,[a(F,{flat:"",bordered:"",class:"text-center q-pa-md"},{default:v(()=>[a(T,null,{default:v(()=>[u.value?(o(),y("div",V,[a(Y,{color:"primary",size:"3em"}),t[0]||(t[0]=r("div",{class:"text-subtitle1 q-mt-md"},"Processing payment result...",-1))])):c.value?(o(),y("div",E,[a(q,{name:"fa-solid fa-exclamation-circle",color:"negative",size:"3em"}),r("div",L,f(c.value),1),a(_,{unelevated:"",color:"primary",label:"Return to Dashboard",class:"q-mt-md",to:"/user/dashboard","no-caps":""})])):(o(),y("div",$,[a(q,{name:x.value,color:p.value,size:"3em"},null,8,["name","color"]),r("div",j,f(w.value),1),r("p",W,f(R.value),1),r("div",G,[a(_,{unelevated:"",color:p.value,label:k.value,to:C.value,class:"q-mx-xs","no-caps":""},null,8,["color","label","to"]),a(_,{outline:"",color:p.value,label:"Return to Dashboard",to:"/user/dashboard",class:"q-mx-xs","no-caps":""},null,8,["color"])])]))]),_:1})]),_:1})])]),_:1}))}});var U=S(H,[["__scopeId","data-v-d5b9ad94"]]);export{U as default};
