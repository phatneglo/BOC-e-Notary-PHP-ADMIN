import{ax as n,aA as i}from"./index.eb3f7448.js";import{api as c}from"./axios.bb4793a2.js";const l=n("templateSection",{state:()=>({sections:[],isLoading:!1,error:null,isDirty:!1}),actions:{async fetchSections(s){var e,t;this.isLoading=!0,this.error=null;try{const r=await c.get(`/templates/${s}/sections`);return r.data.success?this.sections=r.data.data:this.error=r.data.message||"Failed to fetch template sections",r.data}catch(r){throw console.error("Error fetching template sections:",r),this.error=((t=(e=r.response)==null?void 0:e.data)==null?void 0:t.message)||"Failed to fetch template sections",i.create({type:"negative",message:this.error}),r}finally{this.isLoading=!1}},addSection(s){try{const e=`section_${Date.now()}`,t=this.sections.length,r={id:e,name:s.name,order:t};return this.sections.push(r),this.isDirty=!0,r}catch(e){throw console.error("Error adding template section:",e),this.error=e.message||"Failed to add template section",i.create({type:"negative",message:this.error}),e}},updateSection(s,e){try{const t=this.sections.findIndex(r=>r.id===s);return t!==-1?(this.sections[t]={...this.sections[t],name:e.name},this.isDirty=!0,!0):!1}catch(t){throw console.error("Error updating template section:",t),this.error=t.message||"Failed to update template section",i.create({type:"negative",message:this.error}),t}},deleteSection(s){try{return this.sections=this.sections.filter(e=>e.id!==s),this.sections.forEach((e,t)=>{e.order=t}),this.isDirty=!0,!0}catch(e){throw console.error("Error deleting template section:",e),this.error=e.message||"Failed to delete template section",i.create({type:"negative",message:this.error}),e}},reorderSections(s){try{const e=[];return s.forEach((t,r)=>{const o=this.sections.find(a=>a.id===t);o&&e.push({...o,order:r})}),this.sections=e,this.isDirty=!0,!0}catch(e){throw console.error("Error reordering template sections:",e),this.error=e.message||"Failed to reorder template sections",i.create({type:"negative",message:this.error}),e}},resetDirtyFlag(){this.isDirty=!1}}});export{l as u};
