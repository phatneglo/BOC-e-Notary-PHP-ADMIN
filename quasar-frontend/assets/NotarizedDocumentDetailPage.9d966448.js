import{_ as X,d as Z,e as ee,r as w,o as te,j as u,k as x,w as l,az as le,aA as b,D as a,l as t,n as f,B as p,aC as T,C as S,aB as m,y as V,H as v,I as c,z as d,p as n,t as r,v as ae,E as k,aD as g,N as oe,J as F,F as U,s as h,G as I,aY as Y,aJ as L,aX as se,ay as ne,R}from"./index.fce983f6.js";import{Q as D}from"./QTooltip.6dbf60d3.js";import{d as M}from"./date.fa2db621.js";import{q as de}from"./copy-to-clipboard.a2e08312.js";import{N as $}from"./notarized.1e9bd64a.js";const ie={class:"content-container q-pa-md q-pb-xl"},ue={class:"row items-center q-mb-md"},re={class:"col-auto"},ce={key:0,class:"q-pa-xl flex flex-center"},fe={key:1,class:"q-pa-xl flex flex-center"},me={class:"text-center"},ve={key:2,class:"row q-col-gutter-md"},pe={class:"col-12 col-md-4"},_e={class:"code-font"},ye={class:"code-font"},ge={class:"row justify-center q-mt-md q-gutter-sm"},we={class:"row q-col-gutter-sm"},xe={class:"col-6"},be={class:"text-h4 text-primary"},ke={class:"col-6"},De={class:"text-h4 text-primary"},qe={key:0,class:"q-mt-md"},Ce={class:"text-body2"},ze={key:1,class:"q-mt-md"},Ne={key:2,class:"q-mt-md"},Qe={class:"col-12 col-md-8"},Se={key:0,class:"flex flex-center full-height"},Ve=["src"],he={key:2,class:"flex flex-center full-height"},Ie={class:"text-center"},Le={class:"certificate-text"},Re={class:"text-h6"},$e=["src"],Be={key:1,class:"flex flex-center full-height"},Ee={class:"text-center"},Pe={class:"row q-col-gutter-md"},Te={class:"col-12 col-sm-6"},Fe={class:"col-12 col-sm-6"},Ue=Z({__name:"NotarizedDocumentDetailPage",setup(Ye){const A=ee(),o=w(null),_=w(null),z=w(!0),K=w(!1),C=w(""),N=w(!1),Q=w(!1),B=s=>{if(!s)return"";try{return M.formatDate(new Date(s),"MMMM D, YYYY")}catch(e){return console.error("Error formatting date:",e),"Invalid date"}},j=s=>{if(!s)return"";try{return M.formatDate(new Date(s),"MMM D, YYYY h:mm A")}catch(e){return console.error("Error formatting date time:",e),"Invalid date"}},E=s=>s?s.startsWith("http")?s:`${ne.defaults.baseURL}${s}`:"",q=s=>{!s||de(s).then(()=>{b.create({type:"positive",message:"Copied to clipboard",timeout:2e3})}).catch(()=>{b.create({type:"negative",message:"Failed to copy to clipboard",timeout:2e3})})},G=async()=>{z.value=!0;try{const s=parseInt(A.params.id);if(isNaN(s)){b.create({type:"negative",message:"Document ID is invalid"});return}const e=await $.getNotarizedDocument(s);e.data.success?(o.value=e.data.data,await J(s),C.value=`${window.location.origin}/verify?doc=${o.value.document_number}&code=${o.value.doc_keycode}`):b.create({type:"negative",message:e.data.message||"Failed to load document"})}catch(s){console.error("Error loading document:",s),b.create({type:"negative",message:"Failed to load document"})}finally{z.value=!1}},J=async s=>{try{const e=await $.getQrCodeStats(s);e.data.success&&(_.value=e.data.data)}catch(e){console.error("Error loading QR stats:",e)}},P=()=>{if(!(!o.value||!o.value.notarized_id))try{const s=$.downloadNotarizedDocument(o.value.notarized_id),e=window.document.createElement("a");e.href=s,e.target="_blank",e.download=`${o.value.document_title}.pdf`,window.document.body.appendChild(e),e.click(),window.document.body.removeChild(e)}catch(s){console.error("Error downloading document:",s),b.create({type:"negative",message:"Failed to download document"})}},O=()=>{if(!(!o.value||!o.value.qr_code_path))try{const s=window.document.createElement("a");s.href=o.value.qr_code_path,s.target="_blank",s.download=`${o.value.document_number}_qr.png`,window.document.body.appendChild(s),s.click(),window.document.body.removeChild(s)}catch(s){console.error("Error downloading QR code:",s),b.create({type:"negative",message:"Failed to download QR code"})}},H=()=>{!o.value||(Q.value=!0)},W=()=>{N.value=!0};return te(()=>{G()}),(s,e)=>(u(),x(le,{class:"notarized-document-detail-page bg-grey-1"},{default:l(()=>[a("div",ie,[a("div",ue,[e[8]||(e[8]=a("div",{class:"col"},[a("h1",{class:"text-h5 q-my-none"},"Notarized Document"),a("p",{class:"text-grey-8 q-mb-none"}," View detailed information about your notarized document ")],-1)),a("div",re,[t(f,{outline:"",color:"primary",label:"Back to Notarized Documents",icon:"fa-solid fa-arrow-left","no-caps":"",to:"/user/notarized"})])]),z.value?(u(),p("div",ce,[t(T,{color:"primary",size:"3em"}),e[9]||(e[9]=a("span",{class:"q-ml-sm text-primary"},"Loading document details...",-1))])):o.value?(u(),p("div",ve,[a("div",pe,[t(g,{flat:"",class:"bg-white"},{default:l(()=>[t(m,{class:"bg-primary text-white"},{default:l(()=>e[12]||(e[12]=[a("div",{class:"text-h6"},"Document Information",-1)])),_:1}),t(m,null,{default:l(()=>[t(V,{bordered:"",separator:""},{default:l(()=>[t(v,null,{default:l(()=>[t(c,null,{default:l(()=>[t(d,{caption:""},{default:l(()=>e[13]||(e[13]=[n("Document Title")])),_:1}),t(d,null,{default:l(()=>[n(r(o.value.document_title),1)]),_:1})]),_:1})]),_:1}),t(v,null,{default:l(()=>[t(c,null,{default:l(()=>[t(d,{caption:""},{default:l(()=>e[14]||(e[14]=[n("Document Number")])),_:1}),t(d,{class:"row items-center"},{default:l(()=>[a("span",_e,r(o.value.document_number),1),t(f,{flat:"",round:"",dense:"",color:"primary",icon:"fa-solid fa-copy",onClick:e[0]||(e[0]=i=>q(o.value.document_number)),class:"q-ml-xs"},{default:l(()=>[t(D,null,{default:l(()=>e[15]||(e[15]=[n("Copy to clipboard")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(v,null,{default:l(()=>[t(c,null,{default:l(()=>[t(d,{caption:""},{default:l(()=>e[16]||(e[16]=[n("Document Key")])),_:1}),t(d,{class:"row items-center"},{default:l(()=>[a("span",ye,r(o.value.doc_keycode),1),t(f,{flat:"",round:"",dense:"",color:"primary",icon:"fa-solid fa-copy",onClick:e[1]||(e[1]=i=>q(o.value.doc_keycode)),class:"q-ml-xs"},{default:l(()=>[t(D,null,{default:l(()=>e[17]||(e[17]=[n("Copy to clipboard")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(v,null,{default:l(()=>[t(c,null,{default:l(()=>[t(d,{caption:""},{default:l(()=>e[18]||(e[18]=[n("Notarized On")])),_:1}),t(d,null,{default:l(()=>[n(r(B(o.value.notarization_date)),1)]),_:1})]),_:1})]),_:1}),t(v,null,{default:l(()=>[t(c,null,{default:l(()=>[t(d,{caption:""},{default:l(()=>e[19]||(e[19]=[n("Notary")])),_:1}),t(d,null,{default:l(()=>[n(r(o.value.notary_name),1)]),_:1})]),_:1})]),_:1}),t(v,null,{default:l(()=>[t(c,null,{default:l(()=>[t(d,{caption:""},{default:l(()=>e[20]||(e[20]=[n("Book Number")])),_:1}),t(d,null,{default:l(()=>[n(r(o.value.book_number),1)]),_:1})]),_:1})]),_:1}),t(v,null,{default:l(()=>[t(c,null,{default:l(()=>[t(d,{caption:""},{default:l(()=>e[21]||(e[21]=[n("Page Number")])),_:1}),t(d,null,{default:l(()=>[n(r(o.value.page_number),1)]),_:1})]),_:1})]),_:1}),t(v,null,{default:l(()=>[t(c,null,{default:l(()=>[t(d,{caption:""},{default:l(()=>e[22]||(e[22]=[n("Series of")])),_:1}),t(d,null,{default:l(()=>[n(r(o.value.series_of),1)]),_:1})]),_:1})]),_:1}),t(v,null,{default:l(()=>[t(c,null,{default:l(()=>[t(d,{caption:""},{default:l(()=>e[23]||(e[23]=[n("Location")])),_:1}),t(d,null,{default:l(()=>[n(r(o.value.notary_location),1)]),_:1})]),_:1})]),_:1}),t(v,null,{default:l(()=>[t(c,null,{default:l(()=>[t(d,{caption:""},{default:l(()=>e[24]||(e[24]=[n("Certificate Type")])),_:1}),t(d,null,{default:l(()=>[n(r(o.value.certificate_type),1)]),_:1})]),_:1})]),_:1}),t(v,null,{default:l(()=>[t(c,null,{default:l(()=>[t(d,{caption:""},{default:l(()=>e[25]||(e[25]=[n("Expires On")])),_:1}),t(d,null,{default:l(()=>[n(r(B(o.value.expires_at)),1)]),_:1})]),_:1})]),_:1}),o.value.revoked?(u(),x(v,{key:0},{default:l(()=>[t(c,null,{default:l(()=>[t(d,{caption:""},{default:l(()=>e[26]||(e[26]=[n("Status")])),_:1}),t(d,null,{default:l(()=>[t(ae,{color:"negative"},{default:l(()=>e[27]||(e[27]=[n("Revoked")])),_:1})]),_:1})]),_:1})]),_:1})):k("",!0)]),_:1})]),_:1})]),_:1}),t(g,{flat:"",class:"bg-white q-mt-md"},{default:l(()=>[t(m,{class:"bg-primary text-white"},{default:l(()=>e[28]||(e[28]=[a("div",{class:"text-h6"},"Verification QR Code",-1)])),_:1}),t(m,{class:"text-center"},{default:l(()=>[o.value.qr_code_path?(u(),x(oe,{key:0,src:o.value.qr_code_path,width:"200px",height:"200px",class:"q-mx-auto doc-qr-code"},null,8,["src"])):k("",!0),e[29]||(e[29]=a("div",{class:"text-caption text-grey-8 q-mt-sm"}," Scan this QR code to verify the authenticity of this document ",-1)),a("div",ge,[t(f,{outline:"",color:"primary",label:"Download QR Code",icon:"fa-solid fa-download","no-caps":"",onClick:O}),t(f,{outline:"",color:"secondary",label:"Share",icon:"fa-solid fa-share-alt","no-caps":"",onClick:H})])]),_:1})]),_:1}),_.value?(u(),x(g,{key:0,flat:"",class:"bg-white q-mt-md"},{default:l(()=>[t(m,{class:"bg-primary text-white"},{default:l(()=>e[30]||(e[30]=[a("div",{class:"text-h6"},"Verification Statistics",-1)])),_:1}),t(m,null,{default:l(()=>[a("div",we,[a("div",xe,[t(g,{flat:"",bordered:"",class:"text-center q-pa-sm"},{default:l(()=>[a("div",be,r(_.value.total_scans),1),e[31]||(e[31]=a("div",{class:"text-caption"},"Total Scans",-1))]),_:1})]),a("div",ke,[t(g,{flat:"",bordered:"",class:"text-center q-pa-sm"},{default:l(()=>[a("div",De,r(_.value.unique_scans),1),e[32]||(e[32]=a("div",{class:"text-caption"},"Unique Scans",-1))]),_:1})])]),_.value.last_scan?(u(),p("div",qe,[e[33]||(e[33]=a("div",{class:"text-subtitle2"},"Last Scan",-1)),a("div",Ce,r(j(_.value.last_scan)),1)])):k("",!0),_.value.scan_locations&&_.value.scan_locations.length>0?(u(),p("div",ze,[e[34]||(e[34]=a("div",{class:"text-subtitle2"},"Top Locations",-1)),t(V,{dense:"",separator:""},{default:l(()=>[(u(!0),p(F,null,U(_.value.scan_locations,(i,y)=>(u(),x(v,{key:y},{default:l(()=>[t(c,null,{default:l(()=>[n(r(i.location),1)]),_:2},1024),t(c,{side:""},{default:l(()=>[n(r(i.count),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})])):k("",!0),_.value.scan_devices&&_.value.scan_devices.length>0?(u(),p("div",Ne,[e[35]||(e[35]=a("div",{class:"text-subtitle2"},"Top Devices",-1)),t(V,{dense:"",separator:""},{default:l(()=>[(u(!0),p(F,null,U(_.value.scan_devices,(i,y)=>(u(),x(v,{key:y},{default:l(()=>[t(c,null,{default:l(()=>[n(r(i.device_type),1)]),_:2},1024),t(c,{side:""},{default:l(()=>[n(r(i.count),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})])):k("",!0)]),_:1})]),_:1})):k("",!0)]),a("div",Qe,[t(g,{flat:"",class:"bg-white"},{default:l(()=>[t(m,{class:"bg-primary text-white row items-center"},{default:l(()=>[e[38]||(e[38]=a("div",{class:"text-h6"},"Document Preview",-1)),t(h),t(f,{flat:"",round:"",dense:"",color:"white",icon:"fa-solid fa-download",onClick:P},{default:l(()=>[t(D,null,{default:l(()=>e[36]||(e[36]=[n("Download Document")])),_:1})]),_:1}),t(f,{flat:"",round:"",dense:"",color:"white",icon:"fa-solid fa-expand",onClick:W},{default:l(()=>[t(D,null,{default:l(()=>e[37]||(e[37]=[n("Full Screen")])),_:1})]),_:1})]),_:1}),t(m,{class:"document-preview-container"},{default:l(()=>[K.value?(u(),p("div",Se,[t(T,{color:"primary",size:"3em"}),e[39]||(e[39]=a("span",{class:"q-ml-sm"},"Loading document preview...",-1))])):o.value.notarized_document_path?(u(),p("iframe",{key:1,src:E(o.value.notarized_document_path),class:"document-preview-iframe"},null,8,Ve)):(u(),p("div",he,[a("div",Ie,[t(S,{name:"fa-solid fa-file-circle-exclamation",size:"3em",color:"grey-6"}),e[40]||(e[40]=a("div",{class:"text-subtitle1 q-mt-sm"},"Document preview not available",-1))])]))]),_:1})]),_:1}),o.value.certificate_text?(u(),x(g,{key:0,flat:"",class:"bg-white q-mt-md"},{default:l(()=>[t(m,{class:"bg-primary text-white"},{default:l(()=>e[41]||(e[41]=[a("div",{class:"text-h6"},"Notarial Certificate",-1)])),_:1}),t(m,null,{default:l(()=>[a("div",Le,r(o.value.certificate_text),1)]),_:1})]),_:1})):k("",!0)])])):(u(),p("div",fe,[a("div",me,[t(S,{name:"fa-solid fa-file-circle-exclamation",size:"3em",color:"grey-6"}),e[10]||(e[10]=a("div",{class:"text-h6 q-mt-md"},"Document Not Found",-1)),e[11]||(e[11]=a("p",{class:"text-grey-8"}," The requested document could not be found or you don't have permission to view it. ",-1)),t(f,{unelevated:"",color:"primary",label:"Go Back to Notarized Documents","no-caps":"",to:"/user/notarized",class:"q-mt-sm"})])]))]),t(Y,{modelValue:N.value,"onUpdate:modelValue":e[2]||(e[2]=i=>N.value=i),maximized:"",persistent:""},{default:l(()=>[t(g,null,{default:l(()=>[t(m,{class:"row items-center q-py-sm bg-primary text-white"},{default:l(()=>{var i;return[a("div",Re,"Document Preview: "+r((i=o.value)==null?void 0:i.document_title),1),t(h),t(f,{icon:"fa-solid fa-download",flat:"",round:"",dense:"",onClick:P}),I(t(f,{icon:"fa-solid fa-times",flat:"",round:"",dense:""},null,512),[[R]])]}),_:1}),t(m,{class:"full-preview-container"},{default:l(()=>{var i;return[(i=o.value)!=null&&i.notarized_document_path?(u(),p("iframe",{key:0,src:E(o.value.notarized_document_path),class:"full-preview-iframe"},null,8,$e)):(u(),p("div",Be,[a("div",Ee,[t(S,{name:"fa-solid fa-file-circle-exclamation",size:"3em",color:"grey-6"}),e[42]||(e[42]=a("div",{class:"text-subtitle1 q-mt-sm"},"Document preview not available",-1))])]))]}),_:1})]),_:1})]),_:1},8,["modelValue"]),t(Y,{modelValue:Q.value,"onUpdate:modelValue":e[7]||(e[7]=i=>Q.value=i)},{default:l(()=>[t(g,{style:{"min-width":"350px"}},{default:l(()=>[t(m,{class:"row items-center"},{default:l(()=>[e[43]||(e[43]=a("div",{class:"text-h6"},"Share Document",-1)),t(h),I(t(f,{icon:"fa-solid fa-times",flat:"",round:"",dense:""},null,512),[[R]])]),_:1}),t(m,null,{default:l(()=>[e[47]||(e[47]=a("p",null,"Share the document verification link or details:",-1)),t(L,{modelValue:C.value,"onUpdate:modelValue":e[4]||(e[4]=i=>C.value=i),outlined:"",readonly:"",label:"Verification URL",class:"q-mb-md"},{append:l(()=>[t(f,{flat:"",round:"",dense:"",icon:"fa-solid fa-copy",onClick:e[3]||(e[3]=i=>q(C.value))},{default:l(()=>[t(D,null,{default:l(()=>e[44]||(e[44]=[n("Copy URL")])),_:1})]),_:1})]),_:1},8,["modelValue"]),a("div",Pe,[a("div",Te,[t(L,{value:o.value?o.value.document_number:"",outlined:"",readonly:"",label:"Document Number"},{append:l(()=>[t(f,{flat:"",round:"",dense:"",icon:"fa-solid fa-copy",onClick:e[5]||(e[5]=i=>{var y;return q((y=o.value)==null?void 0:y.document_number)})},{default:l(()=>[t(D,null,{default:l(()=>e[45]||(e[45]=[n("Copy Number")])),_:1})]),_:1})]),_:1},8,["value"])]),a("div",Fe,[t(L,{value:o.value?o.value.doc_keycode:"",outlined:"",readonly:"",label:"Document Key"},{append:l(()=>[t(f,{flat:"",round:"",dense:"",icon:"fa-solid fa-copy",onClick:e[6]||(e[6]=i=>{var y;return q((y=o.value)==null?void 0:y.doc_keycode)})},{default:l(()=>[t(D,null,{default:l(()=>e[46]||(e[46]=[n("Copy Key")])),_:1})]),_:1})]),_:1},8,["value"])])])]),_:1}),t(m,{class:"text-center"},{default:l(()=>e[48]||(e[48]=[a("p",{class:"text-caption text-grey-8"}," The above information can be used to verify the authenticity of this document. ",-1)])),_:1}),t(se,{align:"right"},{default:l(()=>[I(t(f,{flat:"",label:"Close",color:"primary"},null,512),[[R]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});var Je=X(Ue,[["__scopeId","data-v-7e1aa32f"]]);export{Je as default};
