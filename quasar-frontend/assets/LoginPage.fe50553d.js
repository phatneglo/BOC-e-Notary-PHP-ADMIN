import{_ as V,d as C,c as S,e as L,f as Q,g as I,r as n,o as B,i as N,j as b,k as U,l,az as F,m as s,F as t,O as z,aJ as D,aK as x,E as g,b0 as R,p as w,D as E,q as v,t as M,s as j,aD as A}from"./index.929154a8.js";import{_ as O}from"./logo.697a2eca.js";const $={class:"text-center q-mb-lg"},J={class:"full-width"},K={class:"row items-center justify-between q-mt-sm"},T={key:0,class:"text-negative q-pa-sm text-center"},W={class:"q-mt-lg"},Y={class:"text-center q-mt-md"},G={class:"text-grey-8"},H=C({__name:"LoginPage",setup(X){const f=S(),_=L(),y=Q(),i=I(),u=n(""),d=n(""),c=n(!0),m=n(!1),o=n(!1),r=n(""),h=async()=>{if(!(!u.value||!d.value)){r.value="",o.value=!0;try{if(await i.login(u.value,d.value)){m.value?localStorage.setItem("remember_credentials","true"):localStorage.removeItem("remember_credentials"),y.notify({type:"positive",message:"Login successful",position:"top",timeout:2e3}),await i.fetchUserProfile();const e=i.isNotary?"/notary/dashboard":"/user/dashboard";f.push(e)}else r.value=i.error||"Invalid username or password. Please try again."}catch(p){console.error("Login error:",p),r.value="An error occurred during login. Please try again."}finally{o.value=!1}}},q=()=>{y.notify({type:"info",message:"Forgot password functionality will be implemented soon.",position:"top",timeout:3e3})},P=()=>{localStorage.getItem("remember_credentials")==="true"&&(m.value=!0)};return B(()=>{_.query.session_expired==="true"&&(i.clearSession(),r.value="Your session has expired. Please log in again.",f.replace({query:{..._.query,session_expired:void 0}})),P()}),(p,e)=>{const k=N("router-link");return b(),U(F,{class:"flex flex-center q-pa-md"},{default:l(()=>[s(A,{class:"bg-white shadow-2 rounded-borders q-pa-lg",style:{width:"100%","min-width":"400px"}},{default:l(()=>[t("div",$,[t("div",J,[s(z,{src:O,width:"250px",alt:"BOC Logo"}),e[6]||(e[6]=t("div",{class:"text-center q-mb-lg"},[t("h2",{class:"text-h4 text-weight-bold q-mb-sm"},"Welcome Back"),t("p",{class:"text-subtitle1 text-grey-8"}," Sign in to access your E-Notary account ")],-1)),s(D,{onSubmit:h,class:"q-gutter-md"},{default:l(()=>[s(x,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=a=>u.value=a),label:"Username",rules:[a=>!!a||"Username is required"],"lazy-rules":"",disable:o.value},{prepend:l(()=>[s(g,{name:"fa-solid fa-user"})]),_:1},8,["modelValue","rules","disable"]),s(x,{modelValue:d.value,"onUpdate:modelValue":e[2]||(e[2]=a=>d.value=a),type:c.value?"password":"text",label:"Password",rules:[a=>!!a||"Password is required"],"lazy-rules":"",disable:o.value},{prepend:l(()=>[s(g,{name:"fa-solid fa-lock"})]),append:l(()=>[s(g,{name:c.value?"fa-solid fa-eye":"fa-solid fa-eye-slash",class:"cursor-pointer",onClick:e[1]||(e[1]=a=>c.value=!c.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules","disable"]),t("div",K,[s(R,{modelValue:m.value,"onUpdate:modelValue":e[3]||(e[3]=a=>m.value=a),label:"Remember me",color:"primary",disable:o.value},null,8,["modelValue","disable"]),s(w,{flat:"",color:"primary",label:"Forgot Password?",class:"text-caption",onClick:q,disable:o.value},null,8,["disable"])]),r.value?(b(),E("div",T,[s(g,{name:"fa-solid fa-circle-exclamation",class:"q-mr-xs"}),v(" "+M(r.value),1)])):j("",!0),t("div",W,[s(w,{type:"submit",label:"Login",color:"primary",class:"full-width",loading:o.value,size:"lg"},null,8,["loading"])]),t("div",Y,[t("p",G,[e[5]||(e[5]=v(" Don't have an account? ")),s(k,{to:"/auth/register",class:"text-primary"},{default:l(()=>e[4]||(e[4]=[v("Register here")])),_:1})])])]),_:1})])])]),_:1})]),_:1})}}});var se=V(H,[["__scopeId","data-v-1ca04df6"]]);export{se as default};
