import{_ as V,d as D,e as T,r as y,o as E,j as f,k,l as t,az as F,F as s,m as e,aB as p,C,aJ as P,aK as $,p as m,aD as Q,D as b,A as L,I as c,J as v,B as n,q as o,t as d,y as Y,K as j,G as U,s as g,aZ as B,E as z}from"./index.fe3d6851.js";import{Q as G,a as J}from"./QTimeline.15696cad.js";import{d as K}from"./date.fa239a2b.js";import{u as O}from"./support.5c1eacc5.js";import{u as H}from"./useNotifications.14eff4b3.js";import"./notification.9e3a726c.js";const W={class:"row q-col-gutter-md"},Z={class:"col-12 col-md-6 offset-md-3"},X={class:"q-mt-md"},ee={key:0,class:"col-12 col-md-6 offset-md-3"},te={key:0,class:"text-caption q-mt-xs"},ae={key:1,class:"col-12 col-md-6 offset-md-3"},le={class:"row items-center"},se={class:"text-body1 q-mt-sm"},ue=D({__name:"SupportStatusPage",setup(re){const I=O(),{showNotification:h}=H(),w=T(),i=y(""),u=y(null),S=y(!1),_=y(!1);E(()=>{const l=w.query.reference;l&&typeof l=="string"&&(i.value=l,R())});const R=async()=>{if(!!i.value){S.value=!0,_.value=!1;try{const l=await I.checkRequestStatus(i.value);u.value=l,h({type:"positive",message:"Request status retrieved successfully"})}catch(l){console.error("Error checking request status:",l),u.value=null,_.value=!0,h({type:"negative",message:"Failed to find request with that reference number"})}finally{S.value=!1}}},N=()=>{u.value=null,_.value=!1,i.value=""},q=l=>l?K.formatDate(l,"MMM D, YYYY h:mm A"):"N/A",x=l=>({new:"blue",processing:"orange",completed:"positive",closed:"grey",resolved:"green"})[l]||"primary",A=l=>({general:"General Inquiry",technical:"Technical Support",account:"Account Issue",verification:"Document Verification",payment:"Payment Issue",feature:"Feature Request",other:"Other"})[l]||l;return(l,a)=>(f(),k(F,{padding:""},{default:t(()=>[s("div",W,[a[16]||(a[16]=s("div",{class:"col-12"},[s("h4",{class:"q-mt-none q-mb-md"},"Support Request Status")],-1)),s("div",Z,[e(Q,{flat:"",bordered:""},{default:t(()=>[e(p,null,{default:t(()=>a[4]||(a[4]=[s("div",{class:"text-h6"},"Check Request Status",-1),s("div",{class:"text-subtitle2"}," Enter your reference number to check the status of your support request. ",-1)])),_:1}),e(C),e(p,null,{default:t(()=>[e(P,{onSubmit:R,class:"q-gutter-md"},{default:t(()=>[e($,{filled:"",modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=r=>i.value=r),label:"Reference Number",rules:[r=>!!r||"Reference number is required"],hint:"e.g. BOC-20240519-A1B2C"},null,8,["modelValue","rules"]),s("div",X,[e(m,{type:"submit",color:"primary",label:"Check Status",loading:S.value,class:"q-mr-sm"},null,8,["loading"]),e(m,{flat:"",color:"secondary",label:"Back to Support",onClick:a[1]||(a[1]=r=>l.$router.push("/support"))})])]),_:1})]),_:1})]),_:1})]),u.value?(f(),b("div",ee,[e(Q,{flat:"",bordered:""},{default:t(()=>[e(p,null,{default:t(()=>a[5]||(a[5]=[s("div",{class:"text-h6"},"Request Status",-1)])),_:1}),e(C),e(p,null,{default:t(()=>[e(L,null,{default:t(()=>[e(c,null,{default:t(()=>[e(v,null,{default:t(()=>[e(n,null,{default:t(()=>a[6]||(a[6]=[o("Reference Number")])),_:1}),e(n,{caption:""},{default:t(()=>[o(d(u.value.reference_number),1)]),_:1})]),_:1})]),_:1}),e(c,null,{default:t(()=>[e(v,null,{default:t(()=>[e(n,null,{default:t(()=>a[7]||(a[7]=[o("Status")])),_:1}),e(n,{caption:""},{default:t(()=>[e(Y,{color:x(u.value.status)},{default:t(()=>[o(d(u.value.status),1)]),_:1},8,["color"])]),_:1})]),_:1})]),_:1}),e(c,null,{default:t(()=>[e(v,null,{default:t(()=>[e(n,null,{default:t(()=>a[8]||(a[8]=[o("Subject")])),_:1}),e(n,{caption:""},{default:t(()=>[o(d(u.value.subject),1)]),_:1})]),_:1})]),_:1}),e(c,null,{default:t(()=>[e(v,null,{default:t(()=>[e(n,null,{default:t(()=>a[9]||(a[9]=[o("Request Type")])),_:1}),e(n,{caption:""},{default:t(()=>[o(d(A(u.value.request_type)),1)]),_:1})]),_:1})]),_:1}),e(c,null,{default:t(()=>[e(v,null,{default:t(()=>[e(n,null,{default:t(()=>a[10]||(a[10]=[o("Submitted At")])),_:1}),e(n,{caption:""},{default:t(()=>[o(d(q(u.value.submitted_at)),1)]),_:1})]),_:1})]),_:1}),e(c,null,{default:t(()=>[e(v,null,{default:t(()=>[e(n,null,{default:t(()=>a[11]||(a[11]=[o("Last Updated")])),_:1}),e(n,{caption:""},{default:t(()=>[o(d(q(u.value.last_updated)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(C),u.value.history&&u.value.history.length>0?(f(),k(p,{key:0},{default:t(()=>[a[12]||(a[12]=s("div",{class:"text-subtitle1 q-mb-sm"},"Status History",-1)),e(G,{color:"secondary"},{default:t(()=>[(f(!0),b(j,null,U(u.value.history,(r,M)=>(f(),k(J,{key:M,title:r.status,subtitle:q(r.created_at),color:x(r.status)},{default:t(()=>[s("div",null,d(r.comment),1),r.staff_name?(f(),b("div",te," Updated by: "+d(r.staff_name),1)):g("",!0)]),_:2},1032,["title","subtitle","color"]))),128))]),_:1})]),_:1})):g("",!0),e(B,{align:"right"},{default:t(()=>[e(m,{flat:"",color:"primary",label:"New Status Check",onClick:N}),e(m,{flat:"",color:"primary",label:"Contact Support",onClick:a[2]||(a[2]=r=>l.$router.push("/support"))})]),_:1})]),_:1})])):g("",!0),_.value?(f(),b("div",ae,[e(Q,{flat:"",bordered:"",class:"bg-red-1"},{default:t(()=>[e(p,null,{default:t(()=>[s("div",le,[e(z,{name:"error",color:"negative",size:"2rem",class:"q-mr-md"}),s("div",null,[a[14]||(a[14]=s("div",{class:"text-h6"},"Request Not Found",-1)),s("div",se,[a[13]||(a[13]=o(" We couldn't find a support request with the reference number: ")),s("strong",null,d(i.value),1)]),a[15]||(a[15]=s("div",{class:"q-mt-md"}," Please check that you've entered the correct reference number and try again. If you continue to have issues, please contact our support team. ",-1))])])]),_:1}),e(B,{align:"right"},{default:t(()=>[e(m,{flat:"",color:"primary",label:"Try Again",onClick:N}),e(m,{color:"primary",label:"Contact Support",onClick:a[3]||(a[3]=r=>l.$router.push("/support"))})]),_:1})]),_:1})])):g("",!0)])]),_:1}))}});var me=V(ue,[["__scopeId","data-v-8faaa000"]]);export{me as default};
