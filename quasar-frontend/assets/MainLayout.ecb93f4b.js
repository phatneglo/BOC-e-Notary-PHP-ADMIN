import{Q as L}from"./QTooltip.8ab756ef.js";import{_ as ne,d as re,c as ue,e as de,f as fe,g as ce,r as A,h as u,w as pe,o as me,i as ve,j as o,k as s,l as t,Q as ye,m as e,n as E,p as M,q as l,t as p,s as d,v as H,x as ge,y as _e,z as ke,A as z,B as f,C as Q,D as h,E as y,F as D,G as U,H as _,I as k,J as r,K as I,L as be,M as we,N as he,O as $,P as xe,R as Me,S as N,T as R}from"./index.eb3f7448.js";import{Q as Qe}from"./QFooter.a93a6cd4.js";import{_ as Y}from"./logo.697a2eca.js";import{d as T}from"./date.ffd58b11.js";import{u as De}from"./notification.73563f3c.js";const Ne={key:0,class:"q-pa-md text-center"},Ce={key:1,class:"q-gutter-sm"},Le={key:2},Se={class:"row items-center no-wrap"},Ve={class:"q-ml-sm"},qe={class:"drawer-header q-pa-md text-center"},Ae=re({__name:"MainLayout",setup(ze){const j=ue();de();const x=fe(),m=ce(),S=De(),v=A(!0),b=A(!1),G=A(!1),g=u(()=>x.screen.lt.sm),c=u(()=>g.value?!1:b.value);function O(){g.value?v.value=!v.value:b.value=!b.value}pe(()=>x.screen.width,n=>{const a=x.screen.lt.sm;a!==g.value&&(a?v.value=!1:(v.value=!0,b.value=!1))});const V=u(()=>m.isAuthenticated),q=u(()=>m.isNotary),B=u(()=>m.isAdmin),J=u(()=>{var n;return m.fullName||((n=m.user)==null?void 0:n.username)||"User"}),F=u(()=>S.notifications),K=u(()=>S.unreadCount),W=u(()=>B.value?"/admin/system-status":q.value?"/notary/dashboard":"/user/dashboard"),X=u(()=>q.value?"/notary/profile":"/user/profile");function P(n){G.value=n}async function Z(){try{await m.logout(),x.notify({type:"positive",message:"You have been logged out successfully.",timeout:2e3}),j.push("/")}catch(n){console.error("Logout error:",n),x.notify({type:"negative",message:"Error during logout. Please try again.",timeout:2e3})}}function ee(n){return{document:"fa-solid fa-file-alt",notary:"fa-solid fa-stamp",payment:"fa-solid fa-money-bill",system:"fa-solid fa-cog",alert:"fa-solid fa-exclamation-triangle"}[n]||"fa-solid fa-bell"}function te(n){return{document:"primary",notary:"positive",payment:"green",system:"blue",alert:"warning"}[n]||"grey"}function ae(n){const a=new Date,w=new Date(n),i=a.getTime()-w.getTime();return i<24*60*60*1e3?T.formatDate(w,"h:mm A"):i<7*24*60*60*1e3?T.formatDate(w,"ddd"):T.formatDate(w,"MMM D")}const C=[{title:"Home",caption:"Landing page",icon:"fa-solid fa-home",link:"/"},{title:"Verify Document",caption:"Verify notarized documents",icon:"fa-solid fa-certificate",link:"/verify"}],oe=u(()=>[{title:"Dashboard",caption:"User dashboard",icon:"fa-solid fa-gauge",link:"/user/dashboard"},{title:"My Templates",caption:"Manage your templates",icon:"fa-solid fa-file-alt",link:"/user/templates"},{title:"Create Document",caption:"Create a new document",icon:"fa-solid fa-plus",link:"/user/document/new"},{title:"My Documents",caption:"View your documents",icon:"fa-solid fa-folder",link:"/user/inbox"},{title:"Notarized Documents",caption:"View notarized documents",icon:"fa-solid fa-check-circle",link:"/user/notarized"},{title:"My Profile",caption:"Manage your profile",icon:"fa-solid fa-user",link:"/user/profile"}]),le=u(()=>[{title:"Dashboard",caption:"Notary dashboard",icon:"fa-solid fa-gauge",link:"/notary/dashboard"},{title:"Notary Queue",caption:"View document queue",icon:"fa-solid fa-list-ol",link:"/notary/queue"},{title:"Processed Documents",caption:"View processed documents",icon:"fa-solid fa-file-signature",link:"/notary/processed"},{title:"Reports",caption:"View and generate reports",icon:"fa-solid fa-chart-line",link:"/notary/reports"},{title:"QR Code Settings",caption:"Customize QR codes",icon:"fa-solid fa-qrcode",link:"/notary/qr-settings"},{title:"My Profile",caption:"Manage your profile",icon:"fa-solid fa-user",link:"/notary/profile"}]),ie=u(()=>[{title:"System Status",caption:"Monitor system health",icon:"fa-solid fa-server",link:"/admin/system-status"},{title:"Support Management",caption:"Manage support requests",icon:"fa-solid fa-ticket-alt",link:"/admin/support"},{title:"Fee Approval",caption:"Review template fee proposals",icon:"fa-solid fa-money-bill",link:"/admin/fee-approval"}]),se=u(()=>V.value?B.value?[...C,...ie.value]:q.value?[...C,...le.value]:[...C,...oe.value]:C);return me(async()=>{if(g.value?v.value=!1:(v.value=!0,b.value=!1),m.token&&!window.location.hash.includes("/auth/login"))try{await m.init()&&m.isAuthenticated&&await S.fetchNotifications()}catch(n){console.error("Failed to initialize auth:",n)}}),(n,a)=>{const w=ve("router-view");return o(),s(ye,{view:"lHh Lpr lFf"},{default:t(()=>[e(he,{elevated:"",class:"bg-primary text-white"},{default:t(()=>[e(E,null,{default:t(()=>[e(M,{flat:"",dense:"",round:"",icon:g.value?v.value?"fa-solid fa-xmark":"fa-solid fa-bars":b.value?"fa-solid fa-bars":"fa-solid fa-bars-staggered","aria-label":"Toggle Menu",onClick:O},{default:t(()=>[g.value?d("",!0):(o(),s(L,{key:0},{default:t(()=>[l(p(b.value?"Expand Menu":"Collapse Menu"),1)]),_:1}))]),_:1},8,["icon"]),e(H),e(ge),V.value?(o(),s(M,{key:0,flat:"",round:"",dense:"",icon:"fa-solid fa-bell"},{default:t(()=>[e(_e,{color:"red",floating:""},{default:t(()=>[l(p(K.value),1)]),_:1}),e(ke,null,{default:t(()=>[e(z,{style:{"min-width":"350px"}},{default:t(()=>[e(f,{header:""},{default:t(()=>a[3]||(a[3]=[l("Notifications")])),_:1}),e(Q),F.value.length===0?(o(),h("div",Ne,[e(y,{name:"fa-solid fa-check-circle",size:"sm",color:"positive",class:"q-mr-xs"}),a[4]||(a[4]=D("span",null,"You have no new notifications",-1))])):d("",!0),(o(!0),h(I,null,U(F.value,i=>_((o(),s(k,{key:i.id,clickable:""},{default:t(()=>[e(r,{avatar:""},{default:t(()=>[e(y,{name:ee(i.type),color:te(i.type)},null,8,["name","color"])]),_:2},1024),e(r,null,{default:t(()=>[e(f,null,{default:t(()=>[l(p(i.subject),1)]),_:2},1024),e(f,{caption:""},{default:t(()=>[l(p(i.body),1)]),_:2},1024)]),_:2},1024),e(r,{side:""},{default:t(()=>[l(p(ae(i.timestamp)),1)]),_:2},1024)]),_:2},1024)),[[N]])),128)),e(Q),_((o(),s(k,{clickable:""},{default:t(()=>[e(r,{class:"text-center text-primary"},{default:t(()=>a[5]||(a[5]=[l(" View All Notifications ")])),_:1})]),_:1})),[[N]])]),_:1})]),_:1})]),_:1})):d("",!0),V.value?(o(),h("div",Le,[e(be,{flat:"","no-caps":""},{label:t(()=>[D("div",Se,[e(we,{size:"26px"},{default:t(()=>[e(y,{name:"fa-solid fa-user"})]),_:1}),D("div",Ve,p(J.value),1)])]),default:t(()=>[e(z,{dense:""},{default:t(()=>[_((o(),s(k,{clickable:"",to:W.value},{default:t(()=>[e(r,{avatar:"",class:"tight-icon"},{default:t(()=>[e(y,{name:"fa-solid fa-gauge",size:"xs"})]),_:1}),e(r,null,{default:t(()=>a[6]||(a[6]=[l("Dashboard")])),_:1})]),_:1},8,["to"])),[[N]]),_((o(),s(k,{clickable:"",to:X.value},{default:t(()=>[e(r,{avatar:"",class:"tight-icon"},{default:t(()=>[e(y,{name:"fa-solid fa-user",size:"xs"})]),_:1}),e(r,null,{default:t(()=>a[7]||(a[7]=[l("My Profile")])),_:1})]),_:1},8,["to"])),[[N]]),e(Q),_((o(),s(k,{clickable:"",onClick:Z},{default:t(()=>[e(r,{avatar:"",class:"tight-icon"},{default:t(()=>[e(y,{name:"fa-solid fa-sign-out-alt",size:"xs"})]),_:1}),e(r,null,{default:t(()=>a[8]||(a[8]=[l("Logout")])),_:1})]),_:1})),[[N]])]),_:1})]),_:1})])):(o(),h("div",Ce,[e(M,{flat:"","no-caps":"",to:"/verify",label:"Verify Document"}),e(M,{flat:"","no-caps":"",to:"/auth/login",label:"Login"}),e(M,{unelevated:"",color:"white","text-color":"primary","no-caps":"",to:"/auth/register",label:"Register"})]))]),_:1})]),_:1}),e(xe,{modelValue:v.value,"onUpdate:modelValue":a[0]||(a[0]=i=>v.value=i),mini:c.value,onMouseover:a[1]||(a[1]=i=>P(!0)),onMouseleave:a[2]||(a[2]=i=>P(!1)),"mini-width":70,bordered:"",class:"bg-grey-1",width:280,breakpoint:500,overlay:g.value,behavior:g.value?"mobile":"desktop","show-if-above":""},{default:t(()=>[D("div",qe,[c.value?(o(),s($,{key:0,src:Y,height:"40px",width:"40px",fit:"contain",alt:"E-Notary Mini Logo"})):(o(),h(I,{key:1},[e($,{src:Y,class:"q-pa-sm",height:"220px",fit:"contain",style:{"max-width":"220px"},alt:"E-Notary Logo"}),a[9]||(a[9]=D("div",{class:"text-subtitle2 text-grey"},"Bureau of Customs",-1))],64))]),e(Q),e(z,{padding:""},{default:t(()=>[c.value?d("",!0):(o(),s(f,{key:0,header:"",class:"text-grey-8"},{default:t(()=>a[10]||(a[10]=[l("Navigation")])),_:1})),(o(!0),h(I,null,U(se.value,i=>_((o(),s(k,{key:i.title,clickable:"",to:i.link,active:i.link===n.$route.path,"active-class":"active-nav-link"},{default:t(()=>[e(r,{avatar:""},{default:t(()=>[e(y,{name:i.icon},null,8,["name"]),c.value?(o(),s(L,{key:0},{default:t(()=>[l(p(i.title),1)]),_:2},1024)):d("",!0)]),_:2},1024),c.value?d("",!0):(o(),s(r,{key:0},{default:t(()=>[e(f,null,{default:t(()=>[l(p(i.title),1)]),_:2},1024),e(f,{caption:""},{default:t(()=>[l(p(i.caption),1)]),_:2},1024)]),_:2},1024))]),_:2},1032,["to","active"])),[[R]])),128)),e(Q,{spaced:""}),c.value?d("",!0):(o(),s(f,{key:1,header:"",class:"text-grey-8"},{default:t(()=>a[11]||(a[11]=[l("Support")])),_:1})),_((o(),s(k,{clickable:"",to:"/help"},{default:t(()=>[e(r,{avatar:""},{default:t(()=>[e(y,{name:"fa-solid fa-question-circle"}),c.value?(o(),s(L,{key:0},{default:t(()=>a[12]||(a[12]=[l("Help & FAQs")])),_:1})):d("",!0)]),_:1}),c.value?d("",!0):(o(),s(r,{key:0},{default:t(()=>[e(f,null,{default:t(()=>a[13]||(a[13]=[l("Help & FAQs")])),_:1}),e(f,{caption:""},{default:t(()=>a[14]||(a[14]=[l("Get assistance and answers")])),_:1})]),_:1}))]),_:1})),[[R]]),_((o(),s(k,{clickable:"",to:"/support"},{default:t(()=>[e(r,{avatar:""},{default:t(()=>[e(y,{name:"fa-solid fa-headset"}),c.value?(o(),s(L,{key:0},{default:t(()=>a[15]||(a[15]=[l("Support Center")])),_:1})):d("",!0)]),_:1}),c.value?d("",!0):(o(),s(r,{key:0},{default:t(()=>[e(f,null,{default:t(()=>a[16]||(a[16]=[l("Support Center")])),_:1}),e(f,{caption:""},{default:t(()=>a[17]||(a[17]=[l("Contact support")])),_:1})]),_:1}))]),_:1})),[[R]])]),_:1})]),_:1},8,["modelValue","mini","overlay","behavior"]),e(Me,null,{default:t(()=>[e(w)]),_:1}),e(Qe,{elevated:"",class:"bg-primary text-white"},{default:t(()=>[e(E,null,{default:t(()=>[e(H,{class:"text-center text-subtitle2"},{default:t(()=>[l(" \xA9 "+p(new Date().getFullYear())+" Bureau of Customs - E-Notary System ",1)]),_:1})]),_:1})]),_:1})]),_:1})}}});var Ee=ne(Ae,[["__scopeId","data-v-3922f6a1"]]);export{Ee as default};
