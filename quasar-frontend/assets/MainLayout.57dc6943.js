import{Q as M}from"./QTooltip.6dbf60d3.js";import{_ as oe,d as ie,c as le,e as se,f as ne,g as re,r as L,h as d,o as ue,i as de,j as o,k as s,w as t,Q as fe,l as e,m as F,n as b,p as i,t as c,q as I,s as ce,v as pe,x as me,y as S,z as f,A as w,B as k,C as y,D as h,E as p,F as P,G as v,H as g,I as r,J as V,K as ye,L as ve,M as ge,N as E,O as _e,P as ke,R as x,S as q}from"./index.fce983f6.js";import{Q as be}from"./QFooter.972cec10.js";import{_ as H}from"./logo.697a2eca.js";import{d as A}from"./date.fa2db621.js";import{u as we}from"./notification.744f8814.js";const he={key:0,class:"q-pa-md text-center"},xe={key:1,class:"q-gutter-sm"},Qe={key:2},Me={class:"row items-center no-wrap"},De={class:"q-ml-sm"},Ne={class:"drawer-header q-pa-md text-center"},Ce=ie({__name:"MainLayout",setup(Le){const U=le();se();const z=ne(),m=re(),D=we(),R=L(!0),u=L(!1);L(!1);function $(){u.value=!u.value}const N=d(()=>m.isAuthenticated),C=d(()=>m.isNotary),B=d(()=>m.isAdmin),Y=d(()=>{var n;return m.fullName||((n=m.user)==null?void 0:n.username)||"User"}),T=d(()=>D.notifications),j=d(()=>D.unreadCount),G=d(()=>B.value?"/admin/system-status":C.value?"/notary/dashboard":"/user/dashboard"),O=d(()=>C.value?"/notary/profile":"/user/profile");function Se(n){}async function J(){try{await m.logout(),z.notify({type:"positive",message:"You have been logged out successfully.",timeout:2e3}),U.push("/")}catch(n){console.error("Logout error:",n),z.notify({type:"negative",message:"Error during logout. Please try again.",timeout:2e3})}}function K(n){return{document:"fa-solid fa-file-alt",notary:"fa-solid fa-stamp",payment:"fa-solid fa-money-bill",system:"fa-solid fa-cog",alert:"fa-solid fa-exclamation-triangle"}[n]||"fa-solid fa-bell"}function W(n){return{document:"primary",notary:"positive",payment:"green",system:"blue",alert:"warning"}[n]||"grey"}function X(n){const a=new Date,_=new Date(n),l=a.getTime()-_.getTime();return l<24*60*60*1e3?A.formatDate(_,"h:mm A"):l<7*24*60*60*1e3?A.formatDate(_,"ddd"):A.formatDate(_,"MMM D")}const Q=[{title:"Home",caption:"Landing page",icon:"fa-solid fa-home",link:"/"},{title:"Verify Document",caption:"Verify notarized documents",icon:"fa-solid fa-certificate",link:"/verify"}],Z=d(()=>[{title:"Dashboard",caption:"User dashboard",icon:"fa-solid fa-gauge",link:"/user/dashboard"},{title:"My Templates",caption:"Manage your templates",icon:"fa-solid fa-file-alt",link:"/user/templates"},{title:"Create Document",caption:"Create a new document",icon:"fa-solid fa-plus",link:"/user/document/new"},{title:"My Documents",caption:"View your documents",icon:"fa-solid fa-folder",link:"/user/inbox"},{title:"Notarized Documents",caption:"View notarized documents",icon:"fa-solid fa-check-circle",link:"/user/notarized"},{title:"My Profile",caption:"Manage your profile",icon:"fa-solid fa-user",link:"/user/profile"}]),ee=d(()=>[{title:"Dashboard",caption:"Notary dashboard",icon:"fa-solid fa-gauge",link:"/notary/dashboard"},{title:"Notary Queue",caption:"View document queue",icon:"fa-solid fa-list-ol",link:"/notary/queue"},{title:"Processed Documents",caption:"View processed documents",icon:"fa-solid fa-file-signature",link:"/notary/processed"},{title:"Reports",caption:"View and generate reports",icon:"fa-solid fa-chart-line",link:"/notary/reports"},{title:"QR Code Settings",caption:"Customize QR codes",icon:"fa-solid fa-qrcode",link:"/notary/qr-settings"},{title:"My Profile",caption:"Manage your profile",icon:"fa-solid fa-user",link:"/notary/profile"}]),te=d(()=>[{title:"System Status",caption:"Monitor system health",icon:"fa-solid fa-server",link:"/admin/system-status"},{title:"Support Management",caption:"Manage support requests",icon:"fa-solid fa-ticket-alt",link:"/admin/support"},{title:"Fee Approval",caption:"Review template fee proposals",icon:"fa-solid fa-money-bill",link:"/admin/fee-approval"}]),ae=d(()=>N.value?B.value?[...Q,...te.value]:C.value?[...Q,...ee.value]:[...Q,...Z.value]:Q);return ue(async()=>{if(m.token&&!window.location.hash.includes("/auth/login"))try{await m.init()&&m.isAuthenticated&&await D.fetchNotifications()}catch(n){console.error("Failed to initialize auth:",n)}}),(n,a)=>{const _=de("router-view");return o(),s(fe,{view:"lHh Lpr lFf"},{default:t(()=>[e(ge,{elevated:"",class:"bg-primary text-white"},{default:t(()=>[e(F,null,{default:t(()=>[e(b,{flat:"",dense:"",round:"",icon:u.value?"fa-solid fa-bars":"fa-solid fa-bars-staggered","aria-label":"Toggle Menu",onClick:$},{default:t(()=>[e(M,null,{default:t(()=>[i(c(u.value?"Expand Menu":"Collapse Menu"),1)]),_:1})]),_:1},8,["icon"]),e(I),e(ce),N.value?(o(),s(b,{key:0,flat:"",round:"",dense:"",icon:"fa-solid fa-bell"},{default:t(()=>[e(pe,{color:"red",floating:""},{default:t(()=>[i(c(j.value),1)]),_:1}),e(me,null,{default:t(()=>[e(S,{style:{"min-width":"350px"}},{default:t(()=>[e(f,{header:""},{default:t(()=>a[3]||(a[3]=[i("Notifications")])),_:1}),e(w),T.value.length===0?(o(),k("div",he,[e(y,{name:"fa-solid fa-check-circle",size:"sm",color:"positive",class:"q-mr-xs"}),a[4]||(a[4]=h("span",null,"You have no new notifications",-1))])):p("",!0),(o(!0),k(V,null,P(T.value,l=>v((o(),s(g,{key:l.id,clickable:""},{default:t(()=>[e(r,{avatar:""},{default:t(()=>[e(y,{name:K(l.type),color:W(l.type)},null,8,["name","color"])]),_:2},1024),e(r,null,{default:t(()=>[e(f,null,{default:t(()=>[i(c(l.subject),1)]),_:2},1024),e(f,{caption:""},{default:t(()=>[i(c(l.body),1)]),_:2},1024)]),_:2},1024),e(r,{side:""},{default:t(()=>[i(c(X(l.timestamp)),1)]),_:2},1024)]),_:2},1024)),[[x]])),128)),e(w),v((o(),s(g,{clickable:""},{default:t(()=>[e(r,{class:"text-center text-primary"},{default:t(()=>a[5]||(a[5]=[i(" View All Notifications ")])),_:1})]),_:1})),[[x]])]),_:1})]),_:1})]),_:1})):p("",!0),N.value?(o(),k("div",Qe,[e(ye,{flat:"","no-caps":""},{label:t(()=>[h("div",Me,[e(ve,{size:"26px"},{default:t(()=>[e(y,{name:"fa-solid fa-user"})]),_:1}),h("div",De,c(Y.value),1)])]),default:t(()=>[e(S,{dense:""},{default:t(()=>[v((o(),s(g,{clickable:"",to:G.value},{default:t(()=>[e(r,{avatar:"",class:"tight-icon"},{default:t(()=>[e(y,{name:"fa-solid fa-gauge",size:"xs"})]),_:1}),e(r,null,{default:t(()=>a[6]||(a[6]=[i("Dashboard")])),_:1})]),_:1},8,["to"])),[[x]]),v((o(),s(g,{clickable:"",to:O.value},{default:t(()=>[e(r,{avatar:"",class:"tight-icon"},{default:t(()=>[e(y,{name:"fa-solid fa-user",size:"xs"})]),_:1}),e(r,null,{default:t(()=>a[7]||(a[7]=[i("My Profile")])),_:1})]),_:1},8,["to"])),[[x]]),e(w),v((o(),s(g,{clickable:"",onClick:J},{default:t(()=>[e(r,{avatar:"",class:"tight-icon"},{default:t(()=>[e(y,{name:"fa-solid fa-sign-out-alt",size:"xs"})]),_:1}),e(r,null,{default:t(()=>a[8]||(a[8]=[i("Logout")])),_:1})]),_:1})),[[x]])]),_:1})]),_:1})])):(o(),k("div",xe,[e(b,{flat:"","no-caps":"",to:"/verify",label:"Verify Document"}),e(b,{flat:"","no-caps":"",to:"/auth/login",label:"Login"}),e(b,{unelevated:"",color:"white","text-color":"primary","no-caps":"",to:"/auth/register",label:"Register"})]))]),_:1})]),_:1}),e(_e,{modelValue:R.value,"onUpdate:modelValue":a[0]||(a[0]=l=>R.value=l),mini:u.value,onMouseover:a[1]||(a[1]=l=>void 0),onMouseleave:a[2]||(a[2]=l=>void 0),"mini-width":70,bordered:"",class:"bg-grey-1",width:280,breakpoint:500,"show-if-above":""},{default:t(()=>[h("div",Ne,[u.value?(o(),s(E,{key:0,src:H,height:"40px",width:"40px",fit:"contain",alt:"E-Notary Mini Logo"})):(o(),k(V,{key:1},[e(E,{src:H,class:"q-pa-sm",height:"220px",fit:"contain",style:{"max-width":"220px"},alt:"E-Notary Logo"}),a[9]||(a[9]=h("div",{class:"text-subtitle2 text-grey"},"Bureau of Customs",-1))],64))]),e(w),e(S,{padding:""},{default:t(()=>[u.value?p("",!0):(o(),s(f,{key:0,header:"",class:"text-grey-8"},{default:t(()=>a[10]||(a[10]=[i("Navigation")])),_:1})),(o(!0),k(V,null,P(ae.value,l=>v((o(),s(g,{key:l.title,clickable:"",to:l.link,active:l.link===n.$route.path,"active-class":"active-nav-link"},{default:t(()=>[e(r,{avatar:""},{default:t(()=>[e(y,{name:l.icon},null,8,["name"]),u.value?(o(),s(M,{key:0},{default:t(()=>[i(c(l.title),1)]),_:2},1024)):p("",!0)]),_:2},1024),u.value?p("",!0):(o(),s(r,{key:0},{default:t(()=>[e(f,null,{default:t(()=>[i(c(l.title),1)]),_:2},1024),e(f,{caption:""},{default:t(()=>[i(c(l.caption),1)]),_:2},1024)]),_:2},1024))]),_:2},1032,["to","active"])),[[q]])),128)),e(w,{spaced:""}),u.value?p("",!0):(o(),s(f,{key:1,header:"",class:"text-grey-8"},{default:t(()=>a[11]||(a[11]=[i("Support")])),_:1})),v((o(),s(g,{clickable:"",to:"/help"},{default:t(()=>[e(r,{avatar:""},{default:t(()=>[e(y,{name:"fa-solid fa-question-circle"}),u.value?(o(),s(M,{key:0},{default:t(()=>a[12]||(a[12]=[i("Help & FAQs")])),_:1})):p("",!0)]),_:1}),u.value?p("",!0):(o(),s(r,{key:0},{default:t(()=>[e(f,null,{default:t(()=>a[13]||(a[13]=[i("Help & FAQs")])),_:1}),e(f,{caption:""},{default:t(()=>a[14]||(a[14]=[i("Get assistance and answers")])),_:1})]),_:1}))]),_:1})),[[q]]),v((o(),s(g,{clickable:"",to:"/support"},{default:t(()=>[e(r,{avatar:""},{default:t(()=>[e(y,{name:"fa-solid fa-headset"}),u.value?(o(),s(M,{key:0},{default:t(()=>a[15]||(a[15]=[i("Support Center")])),_:1})):p("",!0)]),_:1}),u.value?p("",!0):(o(),s(r,{key:0},{default:t(()=>[e(f,null,{default:t(()=>a[16]||(a[16]=[i("Support Center")])),_:1}),e(f,{caption:""},{default:t(()=>a[17]||(a[17]=[i("Contact support")])),_:1})]),_:1}))]),_:1})),[[q]])]),_:1})]),_:1},8,["modelValue","mini"]),e(ke,null,{default:t(()=>[e(_)]),_:1}),e(be,{elevated:"",class:"bg-primary text-white"},{default:t(()=>[e(F,null,{default:t(()=>[e(I,{class:"text-center text-subtitle2"},{default:t(()=>[i(" \xA9 "+c(new Date().getFullYear())+" Bureau of Customs - E-Notary System ",1)]),_:1})]),_:1})]),_:1})]),_:1})}}});var Te=oe(Ce,[["__scopeId","data-v-0dcd504c"]]);export{Te as default};
