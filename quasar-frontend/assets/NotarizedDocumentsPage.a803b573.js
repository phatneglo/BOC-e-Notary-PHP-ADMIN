import{_ as W,d as ee,c as te,r as p,h as U,o as oe,j as d,k as f,w as s,az as ae,aA as b,D as a,l as t,n as i,b4 as le,C as g,aJ as D,aM as se,B as h,aC as ne,aD as q,t as c,aB as u,J as de,F as ie,x as re,y as ce,G as v,H as z,I as _,p as x,N as M,E as I,aX as L,s as Y,aY as P,R as y}from"./index.72b13dbe.js";import{Q as E}from"./QTooltip.942d6901.js";import{d as ue}from"./date.22c75b55.js";import{q as me}from"./copy-to-clipboard.f12cdd98.js";import{N as A}from"./notarized.de7d4856.js";const pe={class:"content-container q-pa-md q-pb-xl"},fe={class:"row items-center q-mb-md"},ve={class:"col-auto"},_e={class:"row q-col-gutter-md q-mb-md"},ye={class:"col-12 col-md-8"},ge={class:"col-12 col-md-4"},xe={key:0,class:"q-pa-xl flex flex-center"},be={class:"text-grey-8"},we={key:2,class:"row q-col-gutter-md"},ke={class:"row items-center no-wrap"},Ce={class:"col"},De={class:"ellipsis-2-lines text-h6"},he={class:"text-caption"},qe={class:"col-auto"},ze={class:"row q-col-gutter-md"},Qe={class:"col-6"},Ne={class:"text-body2"},Ve={class:"col-6"},Se={class:"text-body2"},$e={class:"col-6"},Te={class:"text-body2 code-font"},Le={class:"col-6"},Ee={class:"text-body2"},Fe={class:"row q-col-gutter-md q-mt-md"},Re={class:"col-6"},Be={class:"text-body2"},Ue={class:"col-6"},Me={class:"text-body2 code-font"},Ie={class:"row q-col-gutter-md"},Ye={class:"col-12 col-sm-6"},Pe={class:"col-12 col-sm-6"},Ae=ee({__name:"NotarizedDocumentsPage",setup(Ke){const K=te(),Q=p([]),N=p(!0),m=p(""),V=p("newest"),n=p(null),S=p(!1),$=p(!1),k=p(""),O=[{label:"Newest First",value:"newest"},{label:"Oldest First",value:"oldest"},{label:"Title A-Z",value:"title_asc"},{label:"Title Z-A",value:"title_desc"},{label:"Expiry (Soonest)",value:"expiry_asc"},{label:"Expiry (Latest)",value:"expiry_desc"}],F=U(()=>{let l=[...Q.value];if(m.value){const e=m.value.toLowerCase();l=l.filter(o=>o.document_title.toLowerCase().includes(e)||o.document_number.toLowerCase().includes(e)||o.notary_name.toLowerCase().includes(e)||o.doc_keycode.toLowerCase().includes(e))}switch(V.value){case"newest":l.sort((e,o)=>new Date(o.notarization_date).getTime()-new Date(e.notarization_date).getTime());break;case"oldest":l.sort((e,o)=>new Date(e.notarization_date).getTime()-new Date(o.notarization_date).getTime());break;case"title_asc":l.sort((e,o)=>e.document_title.localeCompare(o.document_title));break;case"title_desc":l.sort((e,o)=>o.document_title.localeCompare(e.document_title));break;case"expiry_asc":l.sort((e,o)=>new Date(e.expires_at).getTime()-new Date(o.expires_at).getTime());break;case"expiry_desc":l.sort((e,o)=>new Date(o.expires_at).getTime()-new Date(e.expires_at).getTime());break}return l}),J=U(()=>m.value?`No notarized documents found matching "${m.value}".`:"You don't have any notarized documents yet. Submit a document for notarization to get started."),R=l=>l?ue.formatDate(new Date(l),"MMM D, YYYY"):"",Z=async()=>{N.value=!0;try{const l=await A.getNotarizedDocuments();l.data.success?Q.value=l.data.data||[]:(Q.value=[],b.create({type:"negative",message:l.data.message||"Failed to load notarized documents"}))}catch(l){console.error("Error loading notarized documents:",l),b.create({type:"negative",message:"Failed to load notarized documents"})}finally{N.value=!1}},B=l=>{K.push(`/user/notarized/${l.notarized_id}`)},j=l=>{try{const e=A.downloadNotarizedDocument(l.notarized_id),o=l.createElement("a");o.href=e,o.target="_blank",o.download=`${l.document_title}.pdf`,l.body.appendChild(o),o.click(),l.body.removeChild(o)}catch(e){console.error("Error downloading document:",e),b.create({type:"negative",message:"Failed to download document"})}},G=l=>{n.value=l,S.value=!0},H=()=>{if(!(!n.value||!n.value.qr_code_path))try{const l=document.createElement("a");l.href=n.value.qr_code_path,l.target="_blank",l.download=`${n.value.document_number}_qr.png`,document.body.appendChild(l),l.click(),document.body.removeChild(l)}catch(l){console.error("Error downloading QR code:",l),b.create({type:"negative",message:"Failed to download QR code"})}},X=l=>{n.value=l,k.value=`${window.location.origin}/verify?doc=${l.document_number}&code=${l.doc_keycode}`,$.value=!0},T=l=>{!l||me(l).then(()=>{b.create({type:"positive",message:"Copied to clipboard",timeout:2e3})}).catch(()=>{b.create({type:"negative",message:"Failed to copy to clipboard",timeout:2e3})})};return oe(()=>{Z()}),(l,e)=>(d(),f(ae,{class:"notarized-documents-page bg-grey-1"},{default:s(()=>[a("div",pe,[a("div",fe,[e[9]||(e[9]=a("div",{class:"col"},[a("h1",{class:"text-h5 q-my-none"},"Notarized Documents"),a("p",{class:"text-grey-8 q-mb-none"}," Access and manage your notarized documents ")],-1)),a("div",ve,[t(i,{outline:"",color:"primary",label:"My Documents",icon:"fa-solid fa-folder","no-caps":"",to:"/user/inbox"})])]),a("div",_e,[a("div",ye,[t(D,{modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=o=>m.value=o),dense:"",outlined:"",placeholder:"Search notarized documents",class:"full-width"},le({prepend:s(()=>[t(g,{name:"fa-solid fa-search"})]),_:2},[m.value?{name:"append",fn:s(()=>[t(g,{name:"fa-solid fa-times",class:"cursor-pointer",onClick:e[0]||(e[0]=o=>m.value="")})]),key:"0"}:void 0]),1032,["modelValue"])]),a("div",ge,[t(se,{modelValue:V.value,"onUpdate:modelValue":e[2]||(e[2]=o=>V.value=o),options:O,outlined:"",dense:"",label:"Sort By","emit-value":"","map-options":"","options-dense":"",class:"full-width"},null,8,["modelValue"])])]),N.value?(d(),h("div",xe,[t(ne,{color:"primary",size:"3em"}),e[10]||(e[10]=a("span",{class:"q-ml-sm text-primary"},"Loading notarized documents...",-1))])):F.value.length===0?(d(),f(q,{key:1,flat:"",class:"bg-white"},{default:s(()=>[t(u,{class:"text-center q-pa-xl"},{default:s(()=>[t(g,{name:"fa-solid fa-file-certificate",size:"3em",color:"grey-6"}),e[11]||(e[11]=a("div",{class:"text-h6 q-mt-md"},"No Notarized Documents Found",-1)),a("p",be,c(J.value),1),t(i,{unelevated:"",color:"primary",label:"Create New Document",icon:"fa-solid fa-plus","no-caps":"",class:"q-mt-sm",to:"/user/template-selection"})]),_:1})]),_:1})):(d(),h("div",we,[(d(!0),h(de,null,ie(F.value,o=>(d(),h("div",{key:o.notarized_id,class:"col-12 col-sm-6 col-md-4 col-lg-3"},[t(q,{class:"document-card"},{default:s(()=>[t(u,{class:"bg-primary text-white"},{default:s(()=>[a("div",ke,[a("div",Ce,[a("div",De,c(o.document_title),1),a("div",he,"Doc #: "+c(o.document_number),1)]),a("div",qe,[t(i,{flat:"",round:"",dense:"",color:"white",icon:"fa-solid fa-ellipsis-v"},{default:s(()=>[t(re,{anchor:"bottom left",self:"top left"},{default:s(()=>[t(ce,{style:{"min-width":"150px"}},{default:s(()=>[v((d(),f(z,{clickable:"",onClick:r=>B(o)},{default:s(()=>[t(_,{avatar:""},{default:s(()=>[t(g,{name:"fa-solid fa-eye"})]),_:1}),t(_,null,{default:s(()=>e[12]||(e[12]=[x("View Details")])),_:1})]),_:2},1032,["onClick"])),[[y]]),v((d(),f(z,{clickable:"",onClick:r=>j(o)},{default:s(()=>[t(_,{avatar:""},{default:s(()=>[t(g,{name:"fa-solid fa-download"})]),_:1}),t(_,null,{default:s(()=>e[13]||(e[13]=[x("Download")])),_:1})]),_:2},1032,["onClick"])),[[y]]),v((d(),f(z,{clickable:"",onClick:r=>G(o)},{default:s(()=>[t(_,{avatar:""},{default:s(()=>[t(g,{name:"fa-solid fa-qrcode"})]),_:1}),t(_,null,{default:s(()=>e[14]||(e[14]=[x("Show QR Code")])),_:1})]),_:2},1032,["onClick"])),[[y]]),v((d(),f(z,{clickable:"",onClick:r=>X(o)},{default:s(()=>[t(_,{avatar:""},{default:s(()=>[t(g,{name:"fa-solid fa-share-alt"})]),_:1}),t(_,null,{default:s(()=>e[15]||(e[15]=[x("Share")])),_:1})]),_:2},1032,["onClick"])),[[y]])]),_:2},1024)]),_:2},1024)]),_:2},1024)])])]),_:2},1024),t(u,null,{default:s(()=>[a("div",ze,[a("div",Qe,[e[16]||(e[16]=a("div",{class:"text-caption text-grey-8"},"Notarized By",-1)),a("div",Ne,c(o.notary_name),1)]),a("div",Ve,[e[17]||(e[17]=a("div",{class:"text-caption text-grey-8"},"Notarized On",-1)),a("div",Se,c(R(o.notarization_date)),1)]),a("div",$e,[e[18]||(e[18]=a("div",{class:"text-caption text-grey-8"},"Doc Key",-1)),a("div",Te,c(o.doc_keycode),1)]),a("div",Le,[e[19]||(e[19]=a("div",{class:"text-caption text-grey-8"},"Expires On",-1)),a("div",Ee,c(R(o.expires_at)),1)])])]),_:2},1024),t(u,{class:"q-pt-none text-center"},{default:s(()=>[o.qr_code_path?(d(),f(M,{key:0,src:o.qr_code_path,width:"100px",height:"100px",class:"q-mx-auto doc-qr-code"},null,8,["src"])):I("",!0),e[20]||(e[20]=a("div",{class:"text-caption text-grey-8 q-mt-xs"}," Scan to verify document ",-1))]),_:2},1024),t(L,{align:"center"},{default:s(()=>[t(i,{unelevated:"",color:"primary",label:"View Document",icon:"fa-solid fa-file-alt","no-caps":"",onClick:r=>B(o),class:"full-width"},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128))]))]),t(P,{modelValue:S.value,"onUpdate:modelValue":e[3]||(e[3]=o=>S.value=o)},{default:s(()=>[t(q,{style:{"min-width":"350px"}},{default:s(()=>[t(u,{class:"row items-center"},{default:s(()=>[e[21]||(e[21]=a("div",{class:"text-h6"},"Document Verification QR Code",-1)),t(Y),v(t(i,{icon:"fa-solid fa-times",flat:"",round:"",dense:""},null,512),[[y]])]),_:1}),t(u,{class:"text-center q-py-lg"},{default:s(()=>{var o,r;return[n.value&&n.value.qr_code_path?(d(),f(M,{key:0,src:n.value.qr_code_path,width:"250px",height:"250px",class:"q-mx-auto"},null,8,["src"])):I("",!0),a("div",Fe,[a("div",Re,[e[22]||(e[22]=a("div",{class:"text-caption text-grey-8"},"Document Number",-1)),a("div",Be,c((o=n.value)==null?void 0:o.document_number),1)]),a("div",Ue,[e[23]||(e[23]=a("div",{class:"text-caption text-grey-8"},"Document Key",-1)),a("div",Me,c((r=n.value)==null?void 0:r.doc_keycode),1)])]),e[24]||(e[24]=a("div",{class:"text-caption text-grey-8 q-mt-md"}," Scan this QR code to verify the authenticity of this document. You can also verify the document by entering the Document Number and Key Code on the verification page. ",-1))]}),_:1}),t(L,{align:"center"},{default:s(()=>[t(i,{outline:"",color:"primary",label:"Download QR Code",icon:"fa-solid fa-download","no-caps":"",onClick:H}),v(t(i,{unelevated:"",color:"primary",label:"Verification Page",icon:"fa-solid fa-external-link-alt","no-caps":"",to:"/verify"},null,512),[[y]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(P,{modelValue:$.value,"onUpdate:modelValue":e[8]||(e[8]=o=>$.value=o)},{default:s(()=>[t(q,{style:{"min-width":"350px"}},{default:s(()=>[t(u,{class:"row items-center"},{default:s(()=>[e[25]||(e[25]=a("div",{class:"text-h6"},"Share Document",-1)),t(Y),v(t(i,{icon:"fa-solid fa-times",flat:"",round:"",dense:""},null,512),[[y]])]),_:1}),t(u,null,{default:s(()=>{var o,r;return[e[29]||(e[29]=a("p",null,"Share the document verification link or details:",-1)),t(D,{modelValue:k.value,"onUpdate:modelValue":e[5]||(e[5]=C=>k.value=C),outlined:"",readonly:"",label:"Verification URL",class:"q-mb-md"},{append:s(()=>[t(i,{flat:"",round:"",dense:"",icon:"fa-solid fa-copy",onClick:e[4]||(e[4]=C=>T(k.value))},{default:s(()=>[t(E,null,{default:s(()=>e[26]||(e[26]=[x("Copy URL")])),_:1})]),_:1})]),_:1},8,["modelValue"]),a("div",Ie,[a("div",Ye,[t(D,{"model-value":((o=n.value)==null?void 0:o.document_number)||"",outlined:"",readonly:"",label:"Document Number"},{append:s(()=>[t(i,{flat:"",round:"",dense:"",icon:"fa-solid fa-copy",onClick:e[6]||(e[6]=C=>{var w;return T((w=n.value)==null?void 0:w.document_number)})},{default:s(()=>[t(E,null,{default:s(()=>e[27]||(e[27]=[x("Copy Number")])),_:1})]),_:1})]),_:1},8,["model-value"])]),a("div",Pe,[t(D,{"model-value":((r=n.value)==null?void 0:r.doc_keycode)||"",outlined:"",readonly:"",label:"Document Key"},{append:s(()=>[t(i,{flat:"",round:"",dense:"",icon:"fa-solid fa-copy",onClick:e[7]||(e[7]=C=>{var w;return T((w=n.value)==null?void 0:w.doc_keycode)})},{default:s(()=>[t(E,null,{default:s(()=>e[28]||(e[28]=[x("Copy Key")])),_:1})]),_:1})]),_:1},8,["model-value"])])])]}),_:1}),t(u,{class:"text-center"},{default:s(()=>e[30]||(e[30]=[a("p",{class:"text-caption text-grey-8"}," The above information can be used to verify the authenticity of this document. ",-1)])),_:1}),t(L,{align:"right"},{default:s(()=>[v(t(i,{flat:"",label:"Close",color:"primary"},null,512),[[y]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});var He=W(Ae,[["__scopeId","data-v-de813538"]]);export{He as default};
