import{u as p}from"./notification.805e1d56.js";import{r as l,h as d,o as g,aV as w,aA as e}from"./index.72b13dbe.js";function A(){const a=p(),o=l(null),i=l(!1),f=d(()=>a.notifications),u=d(()=>a.unreadCount),n=async()=>{try{await a.fetchNotifications()}catch(t){console.error("Failed to load notifications:",t)}},m=async t=>{try{await a.markAsRead(t)}catch(r){console.error("Failed to mark notification as read:",r),e.create({type:"negative",message:"Failed to mark notification as read"})}},v=async()=>{try{await a.markAllAsRead(),e.create({type:"positive",message:"All notifications marked as read"})}catch(t){console.error("Failed to mark all notifications as read:",t),e.create({type:"negative",message:"Failed to mark all notifications as read"})}},y=async t=>{try{await a.deleteNotification(t),e.create({type:"positive",message:"Notification deleted"})}catch(r){console.error("Failed to delete notification:",r),e.create({type:"negative",message:"Failed to delete notification"})}},s=(t=6e4)=>{i.value||(i.value=!0,o.value=window.setInterval(()=>{n()},t))},c=()=>{o.value!==null&&(window.clearInterval(o.value),o.value=null),i.value=!1};return g(()=>{n(),s()}),w(()=>{c()}),{notifications:f,unreadCount:u,loadNotifications:n,markAsRead:m,markAllAsRead:v,deleteNotification:y,startPolling:s,stopPolling:c,showNotification:t=>{e.create(t)}}}export{A as u};
