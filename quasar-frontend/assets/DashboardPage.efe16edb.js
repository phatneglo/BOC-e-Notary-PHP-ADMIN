import{ay as D,_ as Z,d as tt,c as et,g as st,h as at,r as q,o as ot,j as r,k as n,l as a,az as it,F as t,m as e,aB as d,t as m,aD as _,E as l,aY as z,p as c,q as b,aC as N,C as P,A as M,D as k,G as V,I as S,J as p,M as lt,K as I,s as h,H as rt,y as dt,b4 as nt,T as ct}from"./index.eb3f7448.js";import{d as j}from"./date.ffd58b11.js";import{Chart as C,registerables as L}from"./chart.6d6733bd.js";import{D as ut}from"./document.8ce8a7f2.js";C.register(...L);const mt={getNotifications(y={}){return D.get("/notifications",{params:y})},markAsRead(y){return D.put(`/notifications/${y}`)},markAllAsRead(){return D.put("/notifications/read-all")},deleteNotification(y){return D.delete(`/notifications/${y}`)}};const ft={class:"content-container q-pa-md q-pb-xl"},_t={class:"row q-col-gutter-md q-mb-lg"},pt={class:"col-12 col-md-4"},vt={class:"text-h5"},yt={class:"col-12 col-md-8"},gt={class:"row q-col-gutter-md"},bt={class:"col-12 col-sm-6"},ht={class:"row items-center no-wrap"},xt={class:"col"},wt={class:"text-h5 text-primary text-weight-medium"},Dt={class:"stats-icon bg-primary-1"},qt={class:"col-12 col-sm-6"},zt={class:"row items-center no-wrap"},kt={class:"col"},St={class:"text-h5 text-blue text-weight-medium"},jt={class:"stats-icon bg-blue-1"},At={class:"col-12 col-sm-6"},Nt={class:"row items-center no-wrap"},Ct={class:"col"},Qt={class:"text-h5 text-positive text-weight-medium"},Tt={class:"stats-icon bg-positive-1"},Rt={class:"col-12 col-sm-6"},Pt={class:"row items-center no-wrap"},Mt={class:"col"},Vt={class:"text-h5 text-negative text-weight-medium"},It={class:"stats-icon bg-negative-1"},Lt={class:"row q-col-gutter-md"},Yt={class:"col-6 col-sm-3 col-md-2"},Bt={class:"column items-center q-py-xs"},Et={class:"col-6 col-sm-3 col-md-2"},Ft={class:"column items-center q-py-xs"},$t={class:"col-6 col-sm-3 col-md-2"},Ht={class:"column items-center q-py-xs"},Wt={class:"col-6 col-sm-3 col-md-2"},Gt={class:"column items-center q-py-xs"},Jt={class:"col-6 col-sm-3 col-md-2"},Kt={class:"column items-center q-py-xs"},Ot={class:"col-6 col-sm-3 col-md-2"},Ut={class:"column items-center q-py-xs"},Xt={class:"row q-col-gutter-md"},Zt={class:"col-12 col-lg-6"},te={class:"row items-center justify-between"},ee={class:"flex flex-center q-pa-md"},se={class:"text-subtitle1"},ae={class:"text-caption text-grey-7"},oe={class:"col-12 col-lg-6"},ie={class:"flex flex-center q-pa-md"},le={class:"row items-center justify-between"},re={class:"flex flex-center q-pa-md"},de={class:"row"},ne={class:"text-subtitle1 text-weight-medium"},ce={class:"text-caption text-grey-7"},ue={key:0,class:"col-12"},me=tt({__name:"DashboardPage",setup(y){C.register(...L),et();const Y=st(),B=at(()=>Y.fullName||"User"),v=q(!0),u=q({total:0,draft:0,submitted:0,paid:0,notarized:0,rejected:0}),x=q([]),w=q([]);let A=null;const Q=o=>{const s=new Date,i=new Date(o);if(i.toDateString()===s.toDateString())return"Today at "+j.formatDate(i,"h:mm A");const f=new Date(s);if(f.setDate(f.getDate()-1),i.toDateString()===f.toDateString())return"Yesterday at "+j.formatDate(i,"h:mm A");const g=new Date(s);return g.setDate(g.getDate()-7),i>g?j.formatDate(i,"dddd [at] h:mm A"):j.formatDate(i,"MMMM D, YYYY [at] h:mm A")},E=o=>{switch(o){case"Document Created":return"fa-solid fa-plus";case"Document Submitted":return"fa-solid fa-paper-plane";case"Document Notarized":return"fa-solid fa-check-circle";case"Document Rejected":return"fa-solid fa-times-circle";case"Payment Completed":return"fa-solid fa-credit-card";default:return"fa-solid fa-file-alt"}},F=o=>{switch(o){case"Document Created":return"blue";case"Document Submitted":return"cyan";case"Document Notarized":return"positive";case"Document Rejected":return"negative";case"Payment Completed":return"purple";default:return"primary"}},$=o=>{switch(o){case"info":return"fa-solid fa-info-circle";case"success":return"fa-solid fa-check-circle";case"error":return"fa-solid fa-exclamation-circle";case"warning":return"fa-solid fa-exclamation-triangle";default:return"fa-solid fa-bell"}},H=o=>{switch(o){case"info":return"info";case"success":return"positive";case"error":return"negative";case"warning":return"warning";default:return"primary"}},W=async()=>{try{const o=await ut.getDashboardStats();return o.data&&o.data.success?(u.value={total:o.data.data.documents.total,draft:o.data.data.documents.draft,submitted:o.data.data.documents.submitted,paid:o.data.data.documents.paid,notarized:o.data.data.documents.notarized,rejected:o.data.data.documents.rejected},x.value=o.data.data.recent_activity||[],!0):!1}catch(o){return console.error("Error fetching dashboard stats:",o),!1}},G=async()=>{try{const o=await mt.getNotifications({page:1,per_page:5});return o.data&&o.data.success?(w.value=o.data.data||[],!0):!1}catch(o){return console.error("Error fetching notifications:",o),!1}},T=()=>{nt(()=>{const o=document.getElementById("documents-chart");if(!o){console.error("Chart canvas element not found");return}A&&A.destroy();const s={labels:["Draft","Submitted","Paid","Notarized","Rejected"],datasets:[{data:[u.value.draft,u.value.submitted,u.value.paid,u.value.notarized,u.value.rejected],backgroundColor:["#90CAF9","#2196F3","#7E57C2","#4CAF50","#F44336"],borderWidth:0,borderRadius:4}]};A=new C(o,{type:"doughnut",data:s,options:{responsive:!0,maintainAspectRatio:!1,cutout:"65%",plugins:{legend:{position:"bottom",labels:{padding:15,usePointStyle:!0,pointStyle:"circle",font:{size:11}}},tooltip:{callbacks:{label:function(i){const f=i.label||"",g=i.raw||0,K=i.dataset.data.reduce((U,X)=>U+X,0),O=Math.round(g*100/K)+"%";return`${f}: ${g} (${O})`}}}}}})})},R=()=>{u.value={total:50,draft:5,submitted:10,paid:8,notarized:25,rejected:2},x.value=[{document_id:1,document_title:"Affidavit of Loss",action:"Document Created",date:"2025-05-05T14:30:00"},{document_id:2,document_title:"Special Power of Attorney",action:"Document Submitted",date:"2025-05-04T11:15:00"},{document_id:3,document_title:"Deed of Sale",action:"Document Notarized",date:"2025-05-03T09:45:00"},{document_id:4,document_title:"Quitclaim",action:"Document Rejected",date:"2025-05-02T16:20:00"},{document_id:5,document_title:"Lease Agreement",action:"Payment Completed",date:"2025-05-01T13:10:00"}],w.value=[{id:"1",type:"info",subject:"Document Submitted",body:'Your document "Affidavit of Loss" has been submitted successfully.',timestamp:"2025-05-05T14:35:00",is_read:!1,target:"",link:"",from_system:"",created_at:"2025-05-05T14:35:00"},{id:"2",type:"success",subject:"Document Notarized",body:'Your document "Deed of Sale" has been notarized successfully.',timestamp:"2025-05-03T10:00:00",is_read:!0,target:"",link:"",from_system:"",created_at:"2025-05-03T10:00:00"},{id:"3",type:"error",subject:"Document Rejected",body:'Your document "Quitclaim" has been rejected. Please check the details.',timestamp:"2025-05-02T16:25:00",is_read:!1,target:"",link:"",from_system:"",created_at:"2025-05-02T16:25:00"}]},J=async()=>{try{v.value=!0;const o=await W(),s=await G();(!o||!s)&&R(),T()}catch(o){console.error("Error initializing dashboard:",o),R(),T()}finally{v.value=!1}};return ot(()=>{J()}),(o,s)=>(r(),n(it,{class:"dashboard-page bg-grey-1"},{default:a(()=>[t("div",ft,[t("div",_t,[t("div",pt,[e(_,{class:"welcome-card bg-primary text-white",flat:""},{default:a(()=>[e(d,null,{default:a(()=>[t("div",vt,"Welcome, "+m(B.value)+"!",1),s[0]||(s[0]=t("p",{class:"q-mb-none"}," Here's an overview of your E-Notary account. ",-1))]),_:1})]),_:1})]),t("div",yt,[t("div",gt,[t("div",bt,[e(_,{class:"stats-card bg-white",flat:""},{default:a(()=>[e(d,{class:"q-py-md"},{default:a(()=>[t("div",ht,[t("div",xt,[t("div",wt,m(u.value.draft),1),s[1]||(s[1]=t("div",{class:"text-subtitle1 text-grey-8"}," Draft Documents ",-1))]),t("div",Dt,[e(l,{name:"fa-solid fa-file-lines",color:"primary",size:"md"})])])]),_:1}),e(z,null,{default:a(()=>[e(c,{flat:"",color:"primary","no-caps":"",class:"full-width justify-start",to:"/user/inbox?status=draft"},{default:a(()=>[s[2]||(s[2]=b(" View Drafts ")),e(l,{name:"fa-solid fa-arrow-right",class:"q-ml-xs"})]),_:1})]),_:1})]),_:1})]),t("div",qt,[e(_,{class:"stats-card bg-white",flat:""},{default:a(()=>[e(d,{class:"q-py-md"},{default:a(()=>[t("div",zt,[t("div",kt,[t("div",St,m(u.value.submitted),1),s[3]||(s[3]=t("div",{class:"text-subtitle1 text-grey-8"}," Pending Documents ",-1))]),t("div",jt,[e(l,{name:"fa-solid fa-hourglass-half",color:"blue",size:"md"})])])]),_:1}),e(z,null,{default:a(()=>[e(c,{flat:"",color:"blue","no-caps":"",class:"full-width justify-start",to:"/user/inbox?status=submitted"},{default:a(()=>[s[4]||(s[4]=b(" View Pending ")),e(l,{name:"fa-solid fa-arrow-right",class:"q-ml-xs"})]),_:1})]),_:1})]),_:1})]),t("div",At,[e(_,{class:"stats-card bg-white",flat:""},{default:a(()=>[e(d,{class:"q-py-md"},{default:a(()=>[t("div",Nt,[t("div",Ct,[t("div",Qt,m(u.value.notarized),1),s[5]||(s[5]=t("div",{class:"text-subtitle1 text-grey-8"}," Notarized Documents ",-1))]),t("div",Tt,[e(l,{name:"fa-solid fa-check-circle",color:"positive",size:"md"})])])]),_:1}),e(z,null,{default:a(()=>[e(c,{flat:"",color:"positive","no-caps":"",class:"full-width justify-start",to:"/user/notarized"},{default:a(()=>[s[6]||(s[6]=b(" View Notarized ")),e(l,{name:"fa-solid fa-arrow-right",class:"q-ml-xs"})]),_:1})]),_:1})]),_:1})]),t("div",Rt,[e(_,{class:"stats-card bg-white",flat:""},{default:a(()=>[e(d,{class:"q-py-md"},{default:a(()=>[t("div",Pt,[t("div",Mt,[t("div",Vt,m(u.value.rejected),1),s[7]||(s[7]=t("div",{class:"text-subtitle1 text-grey-8"}," Rejected Documents ",-1))]),t("div",It,[e(l,{name:"fa-solid fa-times-circle",color:"negative",size:"md"})])])]),_:1}),e(z,null,{default:a(()=>[e(c,{flat:"",color:"negative","no-caps":"",class:"full-width justify-start",to:"/user/inbox?status=rejected"},{default:a(()=>[s[8]||(s[8]=b(" View Rejected ")),e(l,{name:"fa-solid fa-arrow-right",class:"q-ml-xs"})]),_:1})]),_:1})]),_:1})])])])]),e(_,{class:"q-mb-md bg-white",flat:""},{default:a(()=>[e(d,{class:"q-pb-xs"},{default:a(()=>s[9]||(s[9]=[t("div",{class:"text-h6"},"Quick Actions",-1)])),_:1}),e(d,null,{default:a(()=>[t("div",Lt,[t("div",Yt,[e(c,{unelevated:"",class:"action-btn",color:"primary",to:"/user/document/new"},{default:a(()=>[t("div",Bt,[e(l,{name:"fa-solid fa-plus",size:"1.5rem"}),s[10]||(s[10]=t("div",{class:"q-mt-sm text-caption"},"New Document",-1))])]),_:1})]),t("div",Et,[e(c,{unelevated:"",class:"action-btn",color:"primary",to:"/user/templates"},{default:a(()=>[t("div",Ft,[e(l,{name:"fa-solid fa-file-alt",size:"1.5rem"}),s[11]||(s[11]=t("div",{class:"q-mt-sm text-caption"},"My Templates",-1))])]),_:1})]),t("div",$t,[e(c,{unelevated:"",class:"action-btn",color:"primary",to:"/user/inbox"},{default:a(()=>[t("div",Ht,[e(l,{name:"fa-solid fa-folder",size:"1.5rem"}),s[12]||(s[12]=t("div",{class:"q-mt-sm text-caption"},"My Documents",-1))])]),_:1})]),t("div",Wt,[e(c,{unelevated:"",class:"action-btn",color:"primary",to:"/user/profile"},{default:a(()=>[t("div",Gt,[e(l,{name:"fa-solid fa-user",size:"1.5rem"}),s[13]||(s[13]=t("div",{class:"q-mt-sm text-caption"},"My Profile",-1))])]),_:1})]),t("div",Jt,[e(c,{unelevated:"",class:"action-btn",color:"primary",to:"/verify"},{default:a(()=>[t("div",Kt,[e(l,{name:"fa-solid fa-search",size:"1.5rem"}),s[14]||(s[14]=t("div",{class:"q-mt-sm text-caption"},"Verify Document",-1))])]),_:1})]),t("div",Ot,[e(c,{unelevated:"",class:"action-btn",color:"primary",to:"/help"},{default:a(()=>[t("div",Ut,[e(l,{name:"fa-solid fa-question-circle",size:"1.5rem"}),s[15]||(s[15]=t("div",{class:"q-mt-sm text-caption"},"Help & FAQs",-1))])]),_:1})])])]),_:1})]),_:1}),t("div",Xt,[t("div",Zt,[e(_,{class:"bg-white",flat:""},{default:a(()=>[e(d,{class:"q-pb-none"},{default:a(()=>[t("div",te,[s[17]||(s[17]=t("div",{class:"text-h6"},"Recent Activity",-1)),e(c,{flat:"",dense:"",color:"primary","no-caps":"",to:"/user/activity"},{default:a(()=>[s[16]||(s[16]=b(" View All ")),e(l,{name:"fa-solid fa-arrow-right",class:"q-ml-xs"})]),_:1})])]),_:1}),v.value?(r(),n(d,{key:0},{default:a(()=>[t("div",ee,[e(N,{color:"primary",size:"2em"}),s[18]||(s[18]=t("span",{class:"q-ml-sm"},"Loading activity...",-1))])]),_:1})):(r(),n(P,{key:1})),v.value?h("",!0):(r(),n(M,{key:2,separator:""},{default:a(()=>[(r(!0),k(I,null,V(x.value,(i,f)=>(r(),n(S,{key:f,clickable:"",to:`/user/documents/${i.document_id}`,class:"q-py-md"},{default:a(()=>[e(p,{avatar:""},{default:a(()=>[e(lt,{color:F(i.action),"text-color":"white",size:"sm"},{default:a(()=>[e(l,{name:E(i.action),size:"sm"},null,8,["name"])]),_:2},1032,["color"])]),_:2},1024),e(p,null,{default:a(()=>[t("div",se,m(i.document_title),1),t("div",ae,m(i.action)+" - "+m(Q(i.date)),1)]),_:2},1024),e(p,{side:""},{default:a(()=>[e(l,{name:"fa-solid fa-chevron-right",color:"grey-6",size:"xs"})]),_:1})]),_:2},1032,["to"]))),128)),x.value.length===0?(r(),n(S,{key:0,class:"text-center q-pa-md"},{default:a(()=>[e(p,null,{default:a(()=>s[19]||(s[19]=[t("span",{class:"text-grey"},"No recent activity",-1)])),_:1})]),_:1})):h("",!0)]),_:1}))]),_:1})]),t("div",oe,[e(_,{class:"bg-white",flat:""},{default:a(()=>[e(d,{class:"q-pb-none"},{default:a(()=>s[20]||(s[20]=[t("div",{class:"text-h6"},"Documents by Status",-1)])),_:1}),v.value?(r(),n(d,{key:0},{default:a(()=>[t("div",ie,[e(N,{color:"primary",size:"2em"}),s[21]||(s[21]=t("span",{class:"q-ml-sm"},"Loading chart data...",-1))])]),_:1})):(r(),n(d,{key:1,class:"chart-container"},{default:a(()=>s[22]||(s[22]=[t("canvas",{id:"documents-chart",height:"300"},null,-1)])),_:1}))]),_:1})])]),e(_,{class:"q-mt-md bg-white",flat:""},{default:a(()=>[e(d,{class:"q-pb-none"},{default:a(()=>[t("div",le,[s[24]||(s[24]=t("div",{class:"text-h6"},"Recent Notifications",-1)),e(c,{flat:"",dense:"",color:"primary","no-caps":"",to:"/user/notifications"},{default:a(()=>[s[23]||(s[23]=b(" View All ")),e(l,{name:"fa-solid fa-arrow-right",class:"q-ml-xs"})]),_:1})])]),_:1}),v.value?(r(),n(d,{key:0},{default:a(()=>[t("div",re,[e(N,{color:"primary",size:"2em"}),s[25]||(s[25]=t("span",{class:"q-ml-sm"},"Loading notifications...",-1))])]),_:1})):(r(),n(P,{key:1})),v.value?h("",!0):(r(),n(M,{key:2,separator:""},{default:a(()=>[t("div",de,[(r(!0),k(I,null,V(w.value,(i,f)=>(r(),k("div",{class:"col-12 col-md-6",key:f},[rt((r(),n(S,{clickable:"",class:"q-py-md"},{default:a(()=>[e(p,{avatar:""},{default:a(()=>[e(l,{name:$(i.type),color:H(i.type),size:"sm"},null,8,["name","color"])]),_:2},1024),e(p,null,{default:a(()=>[t("div",ne,m(i.subject),1),t("div",ce,m(Q(i.timestamp)),1)]),_:2},1024),i.is_read?h("",!0):(r(),n(p,{key:0,side:""},{default:a(()=>[e(dt,{color:"primary",size:"xs"})]),_:1}))]),_:2},1024)),[[ct]])]))),128)),w.value.length===0?(r(),k("div",ue,[e(S,{class:"text-center q-pa-md"},{default:a(()=>[e(p,null,{default:a(()=>s[26]||(s[26]=[t("span",{class:"text-grey"},"No notifications",-1)])),_:1})]),_:1})])):h("",!0)])]),_:1}))]),_:1})])]),_:1}))}});var ye=Z(me,[["__scopeId","data-v-1b7c0026"]]);export{ye as default};
