import{_ as O,d as J,c as Y,f as H,g as K,r as m,aX as X,i as Z,j as y,k as W,l as t,az as ee,m as l,F as o,O as ae,b1 as le,b2 as N,aJ as k,aK as p,E as r,D as x,q as V,t as w,s as z,p as c,aN as se,b3 as A,b0 as te,aD as oe}from"./index.eb3f7448.js";import{_ as re}from"./logo.697a2eca.js";const ie={class:"text-center q-mb-lg"},ne={key:0,class:"text-negative q-pa-sm text-center"},ue={class:"q-mt-md"},de={key:0,class:"text-negative q-pa-sm text-center"},me={class:"q-mt-md"},pe={class:"q-my-md"},ve={key:0,class:"text-negative q-pa-sm text-center"},ce={class:"q-mt-md"},fe={class:"q-pt-md"},ge={class:"signature-container q-mb-md"},ye={key:0,class:"signature-pad bg-grey-3 flex flex-center"},be={class:"text-center"},xe={key:1,class:"signature-preview q-pa-md bg-grey-2 flex flex-center"},Ve={class:"text-center"},qe={class:"signature-text"},we={class:"q-mt-lg"},Pe={key:0,class:"text-negative q-pa-sm text-center"},_e={class:"q-mt-xl"},Ne={class:"text-center q-mt-md"},ze={class:"text-grey-8"},ke=J({__name:"RegisterPage",setup(Ie){const I=Y(),f=H(),C=K(),u=m(1),P=m(!0),_=m(!0),b=m(!1),v=m(!1),g=m(!1),i=X({1:"",2:"",3:"",4:""}),D=m(null),F=m(null),S=m(null),s=m({username:"",email:"",password:"",confirmPassword:"",firstName:"",middleName:"",lastName:"",mobileNumber:"",governmentIdType:null,governmentIdNumber:"",address:"",idDocument:null,signatureFile:null,privacyAgreement:!1}),R=["Passport","Driver's License","Voter's ID","National ID","SSS ID","PhilHealth ID","Professional Regulation Commission (PRC) ID","Postal ID"],B=async()=>{var a,d;if(i[1]="",!!await D.value.validate()){g.value=!0;try{u.value=2}catch(e){console.error("Username validation error:",e),i[1]=((d=(a=e.response)==null?void 0:a.data)==null?void 0:d.message)||"Username validation failed"}finally{g.value=!1}}},Q=async()=>{i[2]="",await F.value.validate()&&(u.value=3)},$=async()=>{i[3]="",await S.value.validate()&&(u.value=4)},G=n=>{n.length&&(n[0].failedPropValidation==="max-file-size"?f.notify({type:"negative",message:"File size exceeds the maximum allowed (5MB)"}):f.notify({type:"negative",message:"Invalid file type. Please use JPG, PNG, or PDF"}))},M=n=>{n.length&&(n[0].failedPropValidation==="max-file-size"?f.notify({type:"negative",message:"File size exceeds the maximum allowed (2MB)"}):f.notify({type:"negative",message:"Invalid file type. Please use JPG or PNG"}))},h=()=>{b.value=!0},U=()=>s.value.firstName&&s.value.lastName?`${s.value.firstName} ${s.value.lastName}`:"Signature",j=()=>{if(!b.value)return null;const n=U(),a=new Blob([n],{type:"text/plain"});return new File([a],"signature.txt",{type:"text/plain"})},T=async()=>{var n,a;if(i[4]="",!(!s.value.privacyAgreement||!b.value&&!s.value.signatureFile)){v.value=!0;try{const d={username:s.value.username,email:s.value.email,password:s.value.password,first_name:s.value.firstName,middle_name:s.value.middleName||"",last_name:s.value.lastName,mobile_number:s.value.mobileNumber,privacy_agreement_accepted:s.value.privacyAgreement},e=await C.register(d);if(!e.success)throw new Error(e.message||"Registration failed");const q=s.value.signatureFile||j(),E={government_id_type:s.value.governmentIdType,government_id_number:s.value.governmentIdNumber,address:s.value.address,id_document:s.value.idDocument,digital_signature:q};try{await C.completeProfile(E),f.notify({type:"positive",message:"Registration successful! You can now login to your account.",timeout:5e3}),I.push("/auth/login")}catch(L){console.error("Profile completion error:",L),f.notify({type:"positive",message:"Account created successfully! You can complete your profile after login.",timeout:5e3}),I.push("/auth/login")}}catch(d){if(console.error("Registration error:",d),(a=(n=d.response)==null?void 0:n.data)!=null&&a.errors){const e=d.response.data.errors,q=Object.values(e)[0];Array.isArray(q)&&q.length>0?i[4]=q[0]:i[4]="Validation error. Please check your information."}else i[4]=d.message||"Registration failed. Please try again.";f.notify({type:"negative",message:i[4],timeout:5e3})}finally{v.value=!1}}};return(n,a)=>{const d=Z("router-link");return y(),W(ee,{class:"flex flex-center q-pa-md"},{default:t(()=>[l(oe,{class:"bg-white shadow-2 rounded-borders q-pa-lg",style:{width:"100%","min-width":"380px"}},{default:t(()=>[o("div",ie,[l(ae,{src:re,width:"250px",alt:"BOC Logo"}),a[21]||(a[21]=o("h2",{class:"text-h4 text-weight-bold q-mb-sm"},"Create Your Account",-1)),a[22]||(a[22]=o("p",{class:"text-subtitle1 text-grey-8"}," Register to access the E-Notary system ",-1))]),l(le,{modelValue:u.value,"onUpdate:modelValue":a[20]||(a[20]=e=>u.value=e),vertical:"",color:"primary",animated:"",class:"shadow-1 q-mb-xl"},{default:t(()=>[l(N,{name:1,title:"Account Information",icon:"fa-solid fa-user",done:u.value>1},{default:t(()=>[l(k,{ref_key:"accountForm",ref:D,onSubmit:B,class:"q-pt-md"},{default:t(()=>[l(p,{modelValue:s.value.username,"onUpdate:modelValue":a[0]||(a[0]=e=>s.value.username=e),label:"Username",rules:[e=>!!e||"Username is required",e=>e.length>=4||"Username must be at least 4 characters"],"lazy-rules":""},{prepend:t(()=>[l(r,{size:"xs",name:"fa-solid fa-user"})]),_:1},8,["modelValue","rules"]),l(p,{modelValue:s.value.email,"onUpdate:modelValue":a[1]||(a[1]=e=>s.value.email=e),label:"Email",type:"email",rules:[e=>!!e||"Email is required",e=>/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(e)||"Please enter a valid email"],"lazy-rules":""},{prepend:t(()=>[l(r,{size:"xs",name:"fa-solid fa-envelope"})]),_:1},8,["modelValue","rules"]),l(p,{modelValue:s.value.password,"onUpdate:modelValue":a[3]||(a[3]=e=>s.value.password=e),type:P.value?"password":"text",label:"Password",rules:[e=>!!e||"Password is required",e=>e.length>=8||"Password must be at least 8 characters",e=>/[A-Z]/.test(e)||"Password must contain at least one uppercase letter",e=>/[0-9]/.test(e)||"Password must contain at least one number"],"lazy-rules":""},{prepend:t(()=>[l(r,{size:"xs",name:"fa-solid fa-lock"})]),append:t(()=>[l(r,{name:P.value?"fa-solid fa-eye":"fa-solid fa-eye-slash",class:"cursor-pointer",onClick:a[2]||(a[2]=e=>P.value=!P.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),l(p,{modelValue:s.value.confirmPassword,"onUpdate:modelValue":a[5]||(a[5]=e=>s.value.confirmPassword=e),type:_.value?"password":"text",label:"Confirm Password",rules:[e=>!!e||"Please confirm your password",e=>e===s.value.password||"Passwords do not match"],"lazy-rules":""},{prepend:t(()=>[l(r,{size:"xs",name:"fa-solid fa-lock"})]),append:t(()=>[l(r,{name:_.value?"fa-solid fa-eye":"fa-solid fa-eye-slash",class:"cursor-pointer",onClick:a[4]||(a[4]=e=>_.value=!_.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),i[1]?(y(),x("div",ne,[l(r,{name:"fa-solid fa-circle-exclamation",class:"q-mr-xs"}),V(" "+w(i[1]),1)])):z("",!0),o("div",ue,[l(c,{label:"Continue",type:"submit",color:"primary",class:"q-mt-sm",loading:g.value},null,8,["loading"])])]),_:1},512)]),_:1},8,["done"]),l(N,{name:2,title:"Personal Information",icon:"fa-solid fa-address-card",done:u.value>2},{default:t(()=>[l(k,{ref_key:"personalForm",ref:F,onSubmit:Q,class:"q-gutter-md q-pt-md"},{default:t(()=>[l(p,{modelValue:s.value.firstName,"onUpdate:modelValue":a[6]||(a[6]=e=>s.value.firstName=e),label:"First Name",rules:[e=>!!e||"First name is required"],"lazy-rules":""},{prepend:t(()=>[l(r,{size:"xs",name:"fa-solid fa-user"})]),_:1},8,["modelValue","rules"]),l(p,{modelValue:s.value.middleName,"onUpdate:modelValue":a[7]||(a[7]=e=>s.value.middleName=e),label:"Middle Name (Optional)"},{prepend:t(()=>[l(r,{size:"xs",name:"fa-solid fa-user"})]),_:1},8,["modelValue"]),l(p,{modelValue:s.value.lastName,"onUpdate:modelValue":a[8]||(a[8]=e=>s.value.lastName=e),label:"Last Name",rules:[e=>!!e||"Last name is required"],"lazy-rules":""},{prepend:t(()=>[l(r,{size:"xs",name:"fa-solid fa-user"})]),_:1},8,["modelValue","rules"]),l(p,{modelValue:s.value.mobileNumber,"onUpdate:modelValue":a[9]||(a[9]=e=>s.value.mobileNumber=e),label:"Mobile Number",rules:[e=>!!e||"Mobile number is required",e=>/^\+?[0-9]{10,15}$/.test(e)||"Please enter a valid mobile number"],"lazy-rules":""},{prepend:t(()=>[l(r,{size:"xs",name:"fa-solid fa-phone"})]),_:1},8,["modelValue","rules"]),i[2]?(y(),x("div",de,[l(r,{name:"fa-solid fa-circle-exclamation",class:"q-mr-xs"}),V(" "+w(i[2]),1)])):z("",!0),o("div",me,[l(c,{label:"Back",flat:"",color:"primary",class:"q-mr-sm",onClick:a[10]||(a[10]=e=>u.value=1),disable:g.value},null,8,["disable"]),l(c,{label:"Continue",type:"submit",color:"primary",loading:g.value},null,8,["loading"])])]),_:1},512)]),_:1},8,["done"]),l(N,{name:3,title:"ID Verification",icon:"fa-solid fa-id-card",done:u.value>3},{default:t(()=>[l(k,{ref_key:"idForm",ref:S,onSubmit:$,class:"q-gutter-md q-pt-md"},{default:t(()=>[l(se,{modelValue:s.value.governmentIdType,"onUpdate:modelValue":a[11]||(a[11]=e=>s.value.governmentIdType=e),options:R,label:"Government ID Type",rules:[e=>!!e||"Please select an ID type"],"lazy-rules":""},{prepend:t(()=>[l(r,{size:"xs",name:"fa-solid fa-id-card"})]),_:1},8,["modelValue","rules"]),l(p,{modelValue:s.value.governmentIdNumber,"onUpdate:modelValue":a[12]||(a[12]=e=>s.value.governmentIdNumber=e),label:"ID Number",rules:[e=>!!e||"ID number is required"],"lazy-rules":""},{prepend:t(()=>[l(r,{size:"xs",name:"fa-solid fa-hashtag"})]),_:1},8,["modelValue","rules"]),l(p,{modelValue:s.value.address,"onUpdate:modelValue":a[13]||(a[13]=e=>s.value.address=e),label:"Complete Address",type:"textarea",rules:[e=>!!e||"Address is required"],"lazy-rules":""},{prepend:t(()=>[l(r,{size:"xs",name:"fa-solid fa-home"})]),_:1},8,["modelValue","rules"]),o("div",pe,[a[23]||(a[23]=o("p",{class:"text-body1 q-mb-sm"}," Upload ID Document (Front and Back) ",-1)),l(A,{modelValue:s.value.idDocument,"onUpdate:modelValue":a[14]||(a[14]=e=>s.value.idDocument=e),label:"Choose file",filled:"",accept:".jpg, .jpeg, .png, .pdf",rules:[e=>!!e||"Please upload your ID document"],"lazy-rules":"",counter:"","max-file-size":"5242880",onRejected:G},{prepend:t(()=>[l(r,{name:"fa-solid fa-upload"})]),_:1},8,["modelValue","rules"]),a[24]||(a[24]=o("p",{class:"text-caption text-grey-8 q-mt-xs"}," Accepted formats: JPG, PNG, PDF. Maximum size: 5MB ",-1))]),i[3]?(y(),x("div",ve,[l(r,{name:"fa-solid fa-circle-exclamation",class:"q-mr-xs"}),V(" "+w(i[3]),1)])):z("",!0),o("div",ce,[l(c,{label:"Back",flat:"",color:"primary",class:"q-mr-sm",onClick:a[15]||(a[15]=e=>u.value=2),disable:g.value},null,8,["disable"]),l(c,{label:"Continue",type:"submit",color:"primary",loading:g.value},null,8,["loading"])])]),_:1},512)]),_:1},8,["done"]),l(N,{name:4,title:"Digital Signature",icon:"fa-solid fa-signature"},{default:t(()=>[o("div",fe,[a[26]||(a[26]=o("p",{class:"text-body1 q-mb-md"},"Create your digital signature",-1)),o("div",ge,[b.value?(y(),x("div",xe,[o("div",Ve,[o("p",qe,w(U()),1),l(c,{flat:"",color:"negative",label:"Clear",onClick:a[16]||(a[16]=e=>b.value=!1),class:"q-mt-sm",disable:v.value},null,8,["disable"])])])):(y(),x("div",ye,[o("div",be,[l(r,{name:"fa-solid fa-signature",size:"3rem",color:"grey-7"}),a[25]||(a[25]=o("p",{class:"q-mt-sm"},"Signature pad would be implemented here",-1)),l(c,{color:"primary",label:"Create Signature",onClick:h,class:"q-mt-sm",disable:v.value},null,8,["disable"])])]))]),a[27]||(a[27]=o("p",{class:"text-caption text-grey-8 q-mb-md"}," Or upload an image of your signature: ",-1)),l(A,{modelValue:s.value.signatureFile,"onUpdate:modelValue":a[17]||(a[17]=e=>s.value.signatureFile=e),label:"Upload signature",filled:"",accept:".jpg, .jpeg, .png",counter:"","max-file-size":"2097152",onRejected:M,disable:v.value},{prepend:t(()=>[l(r,{size:"xs",name:"fa-solid fa-upload"})]),_:1},8,["modelValue","disable"]),a[28]||(a[28]=o("p",{class:"text-caption text-grey-8 q-mt-xs"}," Accepted formats: JPG, PNG. Maximum size: 2MB ",-1)),o("div",we,[l(te,{modelValue:s.value.privacyAgreement,"onUpdate:modelValue":a[18]||(a[18]=e=>s.value.privacyAgreement=e),rules:[e=>e||"You must accept the terms and privacy policy"],label:"I agree to the Terms of Service and Privacy Policy",color:"primary",disable:v.value},null,8,["modelValue","rules","disable"])]),i[4]?(y(),x("div",Pe,[l(r,{name:"fa-solid fa-circle-exclamation",class:"q-mr-xs"}),V(" "+w(i[4]),1)])):z("",!0),o("div",_e,[l(c,{label:"Back",flat:"",color:"primary",class:"q-mr-sm",onClick:a[19]||(a[19]=e=>u.value=3),disable:v.value},null,8,["disable"]),l(c,{label:"Complete Registration",type:"submit",color:"primary",loading:v.value,disable:!s.value.privacyAgreement||!b.value&&!s.value.signatureFile||v.value,onClick:T},null,8,["loading","disable"])])])]),_:1})]),_:1},8,["modelValue"]),o("div",Ne,[o("p",ze,[a[30]||(a[30]=V(" Already have an account? ")),l(d,{to:"/auth/login",class:"text-primary"},{default:t(()=>a[29]||(a[29]=[V("Login here")])),_:1})])])]),_:1})]),_:1})}}});var Fe=O(ke,[["__scopeId","data-v-70519039"]]);export{Fe as default};
